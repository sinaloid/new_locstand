/* AutoFill 2.3.4
 * Â©2008-2019 SpryMedia Ltd - datatables.net/license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","datatables.net"],function(b){return a(b,window,document)})}else{if(typeof exports==="object"){module.exports=function(c,b){if(!c){c=window}if(!b||!b.fn.dataTable){b=require("datatables.net")(c,b).$}return a(b,c,c.document)}}else{a(jQuery,window,document)}}}(function(a,h,f,g){var e=a.fn.dataTable;var b=0;var d=function(i,j){if(!e.versionCheck||!e.versionCheck("1.10.8")){throw ("Warning: AutoFill requires DataTables 1.10.8 or greater")}this.c=a.extend(true,{},e.defaults.autoFill,d.defaults,j);this.s={dt:new e.Api(i),namespace:".autoFill"+(b++),scroll:{},scrollInterval:null,handle:{height:0,width:0},enabled:false};this.dom={handle:a('<div class="dt-autofill-handle"/>'),select:{top:a('<div class="dt-autofill-select top"/>'),right:a('<div class="dt-autofill-select right"/>'),bottom:a('<div class="dt-autofill-select bottom"/>'),left:a('<div class="dt-autofill-select left"/>')},background:a('<div class="dt-autofill-background"/>'),list:a('<div class="dt-autofill-list">'+this.s.dt.i18n("autoFill.info","")+"<ul/></div>"),dtScroll:null,offsetParent:null};this._constructor()};a.extend(d.prototype,{enabled:function(){return this.s.enabled},enable:function(i){var j=this;if(i===false){return this.disable()}this.s.enabled=true;this._focusListener();this.dom.handle.on("mousedown",function(k){j._mousedown(k);return false});return this},disable:function(){this.s.enabled=false;this._focusListenerRemove();return this},_constructor:function(){var k=this;var i=this.s.dt;var j=a("div.dataTables_scrollBody",this.s.dt.table().container());i.settings()[0].autoFill=this;if(j.length){this.dom.dtScroll=j;if(j.css("position")==="static"){j.css("position","relative")}}if(this.c.enable!==false){this.enable()}i.on("destroy.autoFill",function(){k._focusListenerRemove()})},_attach:function(m){var i=this.s.dt;var l=i.cell(m).index();var j=this.dom.handle;var k=this.s.handle;if(!l||i.columns(this.c.columns).indexes().indexOf(l.column)===-1){this._detach();return}if(!this.dom.offsetParent){this.dom.offsetParent=a(i.table().node()).offsetParent()}if(!k.height||!k.width){j.appendTo("body");k.height=j.outerHeight();k.width=j.outerWidth()}var n=this._getPosition(m,this.dom.offsetParent);this.dom.attachedTo=m;j.css({top:n.top+m.offsetHeight-k.height,left:n.left+m.offsetWidth-k.width}).appendTo(this.dom.offsetParent)},_actionSelector:function(k){var o=this;var l=this.s.dt;var i=d.actions;var j=[];a.each(i,function(q,p){if(p.available(l,k)){j.push(q)}});if(j.length===1&&this.c.alwaysAsk===false){var n=i[j[0]].execute(l,k);this._update(n,k)}else{var m=this.dom.list.children("ul").empty();j.push("cancel");a.each(j,function(p,q){m.append(a("<li/>").append('<div class="dt-autofill-question">'+i[q].option(l,k)+"<div>").append(a('<div class="dt-autofill-button">').append(a('<button class="'+d.classes.btn+'">'+l.i18n("autoFill.button","&gt;")+"</button>").on("click",function(){var r=i[q].execute(l,k,a(this).closest("li"));o._update(r,k);o.dom.background.remove();o.dom.list.remove()}))))});this.dom.background.appendTo("body");this.dom.list.appendTo("body");this.dom.list.css("margin-top",this.dom.list.outerHeight()/2*-1)}},_detach:function(){this.dom.attachedTo=null;this.dom.handle.detach()},_drawSelection:function(v,l){var k=this.s.dt;var t=this.s.start;var u=a(this.dom.start);var m={row:this.c.vertical?k.rows({page:"current"}).nodes().indexOf(v.parentNode):t.row,column:this.c.horizontal?a(v).index():t.column};var j=k.column.index("toData",m.column);var o=k.row(":eq("+m.row+")",{page:"current"});var n=a(k.cell(o.index(),j).node());if(!k.cell(n).any()){return}if(k.columns(this.c.columns).indexes().indexOf(j)===-1){return}this.s.end=m;var w,i,q,r,p,x;w=t.row<m.row?u:n;i=t.row<m.row?n:u;q=t.column<m.column?u:n;r=t.column<m.column?n:u;w=this._getPosition(w.get(0)).top;q=this._getPosition(q.get(0)).left;p=this._getPosition(i.get(0)).top+i.outerHeight()-w;x=this._getPosition(r.get(0)).left+r.outerWidth()-q;var s=this.dom.select;s.top.css({top:w,left:q,width:x});s.left.css({top:w,left:q,height:p});s.bottom.css({top:w+p,left:q,width:x});s.right.css({top:w,left:q+x,height:p})},_editor:function(m){var p=this.s.dt;var q=this.c.editor;if(!q){return}var w={};var C=[];var t=q.fields();for(var u=0,x=m.length;u<x;u++){for(var y=0,z=m[u].length;y<z;y++){var l=m[u][y];var n=p.settings()[0].aoColumns[l.index.column];var s=n.editField;if(s===g){var o=n.mData;for(var A=0,B=t.length;A<B;A++){var r=q.field(t[A]);if(r.dataSrc()===o){s=r.name();break}}}if(!s){throw"Could not automatically determine field data. Please see https://datatables.net/tn/11"}if(!w[s]){w[s]={}}var v=p.row(l.index.row).id();w[s][v]=l.set;C.push(l.index)}}q.bubble(C,false).multiSet(w).submit()},_emitEvent:function(j,i){this.s.dt.iterator("table",function(k,l){a(k.nTable).triggerHandler(j+".dt",i)})},_focusListener:function(){var l=this;var i=this.s.dt;var k=this.s.namespace;var j=this.c.focus!==null?this.c.focus:i.init().keys||i.settings()[0].keytable?"focus":"hover";if(j==="focus"){i.on("key-focus.autoFill",function(o,n,m){l._attach(m.node())}).on("key-blur.autoFill",function(o,n,m){l._detach()})}else{if(j==="click"){a(i.table().body()).on("click"+k,"td, th",function(m){l._attach(this)});a(f.body).on("click"+k,function(m){if(!a(m.target).parents().filter(i.table().body()).length){l._detach()}})}else{a(i.table().body()).on("mouseenter"+k,"td, th",function(m){l._attach(this)}).on("mouseleave"+k,function(m){if(a(m.relatedTarget).hasClass("dt-autofill-handle")){return}l._detach()})}}},_focusListenerRemove:function(){var i=this.s.dt;i.off(".autoFill");a(i.table().body()).off(this.s.namespace);a(f.body).off(this.s.namespace)},_getPosition:function(l,o){var i=l,j,p=0,k=0;if(!o){o=a(a(this.s.dt.table().node())[0].offsetParent)}do{var n=i.offsetTop;var m=i.offsetLeft;j=a(i.offsetParent);p+=n+parseInt(j.css("border-top-width"))*1;k+=m+parseInt(j.css("border-left-width"))*1;if(i.nodeName.toLowerCase()==="body"){break}i=j.get(0)}while(j.get(0)!==o.get(0));return{top:p,left:k}},_mousedown:function(j){var n=this;var i=this.s.dt;this.dom.start=this.dom.attachedTo;this.s.start={row:i.rows({page:"current"}).nodes().indexOf(a(this.dom.start).parent()[0]),column:a(this.dom.start).index()};a(f.body).on("mousemove.autoFill",function(o){n._mousemove(o)}).on("mouseup.autoFill",function(o){n._mouseup(o)});var m=this.dom.select;var k=a(i.table().node()).offsetParent();m.top.appendTo(k);m.left.appendTo(k);m.right.appendTo(k);m.bottom.appendTo(k);this._drawSelection(this.dom.start,j);this.dom.handle.css("display","none");var l=this.dom.dtScroll;this.s.scroll={windowHeight:a(h).height(),windowWidth:a(h).width(),dtTop:l?l.offset().top:null,dtLeft:l?l.offset().left:null,dtHeight:l?l.outerHeight():null,dtWidth:l?l.outerWidth():null}},_mousemove:function(j){var l=this;var i=this.s.dt;var k=j.target.nodeName.toLowerCase();if(k!=="td"&&k!=="th"){return}this._drawSelection(j.target,j);this._shiftScroll(j)},_mouseup:function(m){a(f.body).off(".autoFill");var w=this;var j=this.s.dt;var s=this.dom.select;s.top.remove();s.left.remove();s.right.remove();s.bottom.remove();this.dom.handle.css("display","block");var u=this.s.start;var p=this.s.end;if(u.row===p.row&&u.column===p.column){return}var v=j.cell(":eq("+u.row+")",u.column+":visible",{page:"current"});if(a("div.DTE",v.node()).length){var n=j.editor();n.on("submitSuccess.dtaf close.dtaf",function(){n.off(".dtaf");setTimeout(function(){w._mouseup(m)},100)}).on("submitComplete.dtaf preSubmitCancelled.dtaf close.dtaf",function(){n.off(".dtaf")});n.submit();return}var r=this._range(u.row,p.row);var i=this._range(u.column,p.column);var t=[];var l=j.settings()[0];var k=l.aoColumns;var o=j.columns(this.c.columns).indexes();for(var q=0;q<r.length;q++){t.push(a.map(i,function(z){var C=j.row(":eq("+r[q]+")",{page:"current"});var x=j.cell(C.index(),z+":visible");var A=x.data();var y=x.index();var B=k[y.column].editField;if(B!==g){A=l.oApi._fnGetObjectDataFn(B)(j.row(y.row).data())}if(o.indexOf(y.column)===-1){return}return{cell:x,data:A,label:x.data(),index:y}}))}this._actionSelector(t);clearInterval(this.s.scrollInterval);this.s.scrollInterval=null},_range:function(m,j){var l=[];var k;if(m<=j){for(k=m;k<=j;k++){l.push(k)}}else{for(k=m;k>=j;k--){l.push(k)}}return l},_shiftScroll:function(m){var q=this;var j=this.s.dt;var o=this.s.scroll;var n=false;var p=5;var i=65;var u=m.pageY-f.body.scrollTop,t=m.pageX-f.body.scrollLeft,s,r,l,k;if(u<i){s=p*-1}else{if(u>o.windowHeight-i){s=p}}if(t<i){r=p*-1}else{if(t>o.windowWidth-i){r=p}}if(o.dtTop!==null&&m.pageY<o.dtTop+i){l=p*-1}else{if(o.dtTop!==null&&m.pageY>o.dtTop+o.dtHeight-i){l=p}}if(o.dtLeft!==null&&m.pageX<o.dtLeft+i){k=p*-1}else{if(o.dtLeft!==null&&m.pageX>o.dtLeft+o.dtWidth-i){k=p}}if(s||r||l||k){o.windowVert=s;o.windowHoriz=r;o.dtVert=l;o.dtHoriz=k;n=true}else{if(this.s.scrollInterval){clearInterval(this.s.scrollInterval);this.s.scrollInterval=null}}if(!this.s.scrollInterval&&n){this.s.scrollInterval=setInterval(function(){if(o.windowVert){f.body.scrollTop+=o.windowVert}if(o.windowHoriz){f.body.scrollLeft+=o.windowHoriz}if(o.dtVert||o.dtHoriz){var v=q.dom.dtScroll[0];if(o.dtVert){v.scrollTop+=o.dtVert}if(o.dtHoriz){v.scrollLeft+=o.dtHoriz}}},20)}},_update:function(s,l){if(s===false){return}var n=this.s.dt;var k;var m=n.columns(this.c.columns).indexes();this._emitEvent("preAutoFill",[n,l]);this._editor(l);var t=this.c.update!==null?this.c.update:this.c.editor?false:true;if(t){for(var o=0,p=l.length;o<p;o++){for(var q=0,r=l[o].length;q<r;q++){k=l[o][q];if(m.indexOf(k.index.column)!==-1){k.cell.data(k.set)}}}n.draw(false)}this._emitEvent("autoFill",[n,l])}});d.actions={increment:{available:function(k,i){var j=i[0][0].label;return !isNaN(j-parseFloat(j))},option:function(j,i){return j.i18n("autoFill.increment",'Increment / decrement each cell by: <input type="number" value="1">')},execute:function(l,k,r){var s=k[0][0].data*1;var o=a("input",r).val()*1;for(var m=0,n=k.length;m<n;m++){for(var p=0,q=k[m].length;p<q;p++){k[m][p].set=s;s+=o}}}},fill:{available:function(j,i){return true},option:function(j,i){return j.i18n("autoFill.fill","Fill all cells with <i>"+i[0][0].label+"</i>")},execute:function(l,k,q){var r=k[0][0].data;for(var m=0,n=k.length;m<n;m++){for(var o=0,p=k[m].length;o<p;o++){k[m][o].set=r}}}},fillHorizontal:{available:function(j,i){return i.length>1&&i[0].length>1},option:function(j,i){return j.i18n("autoFill.fillHorizontal","Fill cells horizontally")},execute:function(l,k,q){for(var m=0,n=k.length;m<n;m++){for(var o=0,p=k[m].length;o<p;o++){k[m][o].set=k[m][0].data}}}},fillVertical:{available:function(j,i){return i.length>1&&i[0].length>1},option:function(j,i){return j.i18n("autoFill.fillVertical","Fill cells vertically")},execute:function(l,k,q){for(var m=0,n=k.length;m<n;m++){for(var o=0,p=k[m].length;o<p;o++){k[m][o].set=k[0][o].data}}}},cancel:{available:function(){return false},option:function(i){return i.i18n("autoFill.cancel","Cancel")},execute:function(){return false}}};d.version="2.3.4";d.defaults={alwaysAsk:false,focus:null,columns:"",enable:true,update:null,editor:null,vertical:true,horizontal:true};d.classes={btn:"btn"};var c=a.fn.dataTable.Api;c.register("autoFill()",function(){return this});c.register("autoFill().enabled()",function(){var i=this.context[0];return i.autoFill?i.autoFill.enabled():false});c.register("autoFill().enable()",function(i){return this.iterator("table",function(j){if(j.autoFill){j.autoFill.enable(i)}})});c.register("autoFill().disable()",function(){return this.iterator("table",function(i){if(i.autoFill){i.autoFill.disable()}})});a(f).on("preInit.dt.autofill",function(j,n,l){if(j.namespace!=="dt"){return}var k=n.oInit.autoFill;var i=e.defaults.autoFill;if(k||i){var m=a.extend({},k,i);if(k!==false){new d(n,m)}}});e.AutoFill=d;e.AutoFill=d;return d}));