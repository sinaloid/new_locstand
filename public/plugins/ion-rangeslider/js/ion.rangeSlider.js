(function(a){if((typeof jQuery==="undefined"||!jQuery)&&typeof define==="function"&&define.amd){define(["jquery"],function(b){return a(b,document,window,navigator)})}else{if((typeof jQuery==="undefined"||!jQuery)&&typeof exports==="object"){a(require("jquery"),document,window,navigator)}else{a(jQuery,document,window,navigator)}}}(function(a,e,m,i,l){var j=0;var h=(function(){var o=i.userAgent,p=/msie\s\d+/i,q;if(o.search(p)>0){q=p.exec(o).toString();q=q.split(" ")[1];if(q<9){a("html").addClass("lt-ie9");return true}}return false}());if(!Function.prototype.bind){Function.prototype.bind=function c(r){var q=this;var p=[].slice;if(typeof q!="function"){throw new TypeError()}var n=p.call(arguments,1),o=function(){if(this instanceof o){var s=function(){};s.prototype=q.prototype;var u=new s();var t=q.apply(u,n.concat(p.call(arguments)));if(Object(t)===t){return t}return u}else{return q.apply(r,n.concat(p.call(arguments)))}};return o}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(t,o){var p;if(this==null){throw new TypeError('"this" is null or not defined')}var s=Object(this);var q=s.length>>>0;if(q===0){return -1}var r=+o||0;if(Math.abs(r)===Infinity){r=0}if(r>=q){return -1}p=Math.max(r>=0?r:q-Math.abs(r),0);while(p<q){if(p in s&&s[p]===t){return p}p++}return -1}}var b='<span class="irs"><span class="irs-line" tabindex="0"></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span>';var k='<span class="irs-bar irs-bar--single"></span><span class="irs-shadow shadow-single"></span><span class="irs-handle single"><i></i><i></i><i></i></span>';var f='<span class="irs-bar"></span><span class="irs-shadow shadow-from"></span><span class="irs-shadow shadow-to"></span><span class="irs-handle from"><i></i><i></i><i></i></span><span class="irs-handle to"><i></i><i></i><i></i></span>';var d='<span class="irs-disable-mask"></span>';var g=function(q,r,s){this.VERSION="2.3.1";this.input=q;this.plugin_count=s;this.current_plugin=0;this.calc_count=0;this.update_tm=0;this.old_from=0;this.old_to=0;this.old_min_interval=null;this.raf_id=null;this.dragging=false;this.force_redraw=false;this.no_diapason=false;this.has_tab_index=true;this.is_key=false;this.is_update=false;this.is_start=true;this.is_finish=false;this.is_active=false;this.is_resize=false;this.is_click=false;r=r||{};this.$cache={win:a(m),body:a(e.body),input:a(q),cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,edge:null,grid:null,grid_labels:[]};this.coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single_fake:0,p_single_real:0,p_from_fake:0,p_from_real:0,p_to_fake:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],big_x:[]};this.labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from_fake:0,p_from_left:0,p_to_fake:0,p_to_left:0,p_single_fake:0,p_single_left:0};var n=this.$cache.input,u=n.prop("value"),o,p,t;o={skin:"flat",type:"single",min:10,max:100,from:null,to:null,step:1,min_interval:0,max_interval:0,drag_interval:false,values:[],p_values:[],from_fixed:false,from_min:null,from_max:null,from_shadow:false,to_fixed:false,to_min:null,to_max:null,to_shadow:false,prettify_enabled:true,prettify_separator:" ",prettify:null,force_edges:false,keyboard:true,grid:false,grid_margin:true,grid_num:4,grid_snap:false,hide_min_max:false,hide_from_to:false,prefix:"",postfix:"",max_postfix:"",decorate_both:true,values_separator:" â€” ",input_values_separator:";",disable:false,block:false,extra_classes:"",scope:null,onStart:null,onChange:null,onFinish:null,onUpdate:null};if(n[0].nodeName!=="INPUT"){console&&console.warn&&console.warn("Base element should be <input>!",n[0])}p={skin:n.data("skin"),type:n.data("type"),min:n.data("min"),max:n.data("max"),from:n.data("from"),to:n.data("to"),step:n.data("step"),min_interval:n.data("minInterval"),max_interval:n.data("maxInterval"),drag_interval:n.data("dragInterval"),values:n.data("values"),from_fixed:n.data("fromFixed"),from_min:n.data("fromMin"),from_max:n.data("fromMax"),from_shadow:n.data("fromShadow"),to_fixed:n.data("toFixed"),to_min:n.data("toMin"),to_max:n.data("toMax"),to_shadow:n.data("toShadow"),prettify_enabled:n.data("prettifyEnabled"),prettify_separator:n.data("prettifySeparator"),force_edges:n.data("forceEdges"),keyboard:n.data("keyboard"),grid:n.data("grid"),grid_margin:n.data("gridMargin"),grid_num:n.data("gridNum"),grid_snap:n.data("gridSnap"),hide_min_max:n.data("hideMinMax"),hide_from_to:n.data("hideFromTo"),prefix:n.data("prefix"),postfix:n.data("postfix"),max_postfix:n.data("maxPostfix"),decorate_both:n.data("decorateBoth"),values_separator:n.data("valuesSeparator"),input_values_separator:n.data("inputValuesSeparator"),disable:n.data("disable"),block:n.data("block"),extra_classes:n.data("extraClasses"),};p.values=p.values&&p.values.split(",");for(t in p){if(p.hasOwnProperty(t)){if(p[t]===l||p[t]===""){delete p[t]}}}if(u!==l&&u!==""){u=u.split(p.input_values_separator||r.input_values_separator||";");if(u[0]&&u[0]==+u[0]){u[0]=+u[0]}if(u[1]&&u[1]==+u[1]){u[1]=+u[1]}if(r&&r.values&&r.values.length){o.from=u[0]&&r.values.indexOf(u[0]);o.to=u[1]&&r.values.indexOf(u[1])}else{o.from=u[0]&&+u[0];o.to=u[1]&&+u[1]}}a.extend(o,r);a.extend(o,p);this.options=o;this.update_check={};this.validate();this.result={input:this.$cache.input,slider:null,min:this.options.min,max:this.options.max,from:this.options.from,from_percent:0,from_value:null,to:this.options.to,to_percent:0,to_value:null};this.init()};g.prototype={init:function(n){this.no_diapason=false;this.coords.p_step=this.convertToPercent(this.options.step,true);this.target="base";this.toggleInput();this.append();this.setMinMax();if(n){this.force_redraw=true;this.calc(true);this.callOnUpdate()}else{this.force_redraw=true;this.calc(true);this.callOnStart()}this.updateScene()},append:function(){var n='<span class="irs irs--'+this.options.skin+" js-irs-"+this.plugin_count+" "+this.options.extra_classes+'"></span>';this.$cache.input.before(n);this.$cache.input.prop("readonly",true);this.$cache.cont=this.$cache.input.prev();this.result.slider=this.$cache.cont;this.$cache.cont.html(b);this.$cache.rs=this.$cache.cont.find(".irs");this.$cache.min=this.$cache.cont.find(".irs-min");this.$cache.max=this.$cache.cont.find(".irs-max");this.$cache.from=this.$cache.cont.find(".irs-from");this.$cache.to=this.$cache.cont.find(".irs-to");this.$cache.single=this.$cache.cont.find(".irs-single");this.$cache.line=this.$cache.cont.find(".irs-line");this.$cache.grid=this.$cache.cont.find(".irs-grid");if(this.options.type==="single"){this.$cache.cont.append(k);this.$cache.bar=this.$cache.cont.find(".irs-bar");this.$cache.edge=this.$cache.cont.find(".irs-bar-edge");this.$cache.s_single=this.$cache.cont.find(".single");this.$cache.from[0].style.visibility="hidden";this.$cache.to[0].style.visibility="hidden";this.$cache.shad_single=this.$cache.cont.find(".shadow-single")}else{this.$cache.cont.append(f);this.$cache.bar=this.$cache.cont.find(".irs-bar");this.$cache.s_from=this.$cache.cont.find(".from");this.$cache.s_to=this.$cache.cont.find(".to");this.$cache.shad_from=this.$cache.cont.find(".shadow-from");this.$cache.shad_to=this.$cache.cont.find(".shadow-to");this.setTopHandler()}if(this.options.hide_from_to){this.$cache.from[0].style.display="none";this.$cache.to[0].style.display="none";this.$cache.single[0].style.display="none"}this.appendGrid();if(this.options.disable){this.appendDisableMask();this.$cache.input[0].disabled=true}else{this.$cache.input[0].disabled=false;this.removeDisableMask();this.bindEvents()}if(!this.options.disable){if(this.options.block){this.appendDisableMask()}else{this.removeDisableMask()}}if(this.options.drag_interval){this.$cache.bar[0].style.cursor="ew-resize"}},setTopHandler:function(){var p=this.options.min,o=this.options.max,n=this.options.from,q=this.options.to;if(n>p&&q===o){this.$cache.s_from.addClass("type_last")}else{if(q<o){this.$cache.s_to.addClass("type_last")}}},changeLevel:function(n){switch(n){case"single":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_single_fake);this.$cache.s_single.addClass("state_hover");break;case"from":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake);this.$cache.s_from.addClass("state_hover");this.$cache.s_from.addClass("type_last");this.$cache.s_to.removeClass("type_last");break;case"to":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_to_fake);this.$cache.s_to.addClass("state_hover");this.$cache.s_to.addClass("type_last");this.$cache.s_from.removeClass("type_last");break;case"both":this.coords.p_gap_left=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake);this.coords.p_gap_right=this.toFixed(this.coords.p_to_fake-this.coords.p_pointer);this.$cache.s_to.removeClass("type_last");this.$cache.s_from.removeClass("type_last");break}},appendDisableMask:function(){this.$cache.cont.append(d);this.$cache.cont.addClass("irs-disabled")},removeDisableMask:function(){this.$cache.cont.remove(".irs-disable-mask");this.$cache.cont.removeClass("irs-disabled")},remove:function(){this.$cache.cont.remove();this.$cache.cont=null;this.$cache.line.off("keydown.irs_"+this.plugin_count);this.$cache.body.off("touchmove.irs_"+this.plugin_count);this.$cache.body.off("mousemove.irs_"+this.plugin_count);this.$cache.win.off("touchend.irs_"+this.plugin_count);this.$cache.win.off("mouseup.irs_"+this.plugin_count);if(h){this.$cache.body.off("mouseup.irs_"+this.plugin_count);this.$cache.body.off("mouseleave.irs_"+this.plugin_count)}this.$cache.grid_labels=[];this.coords.big=[];this.coords.big_w=[];this.coords.big_p=[];this.coords.big_x=[];cancelAnimationFrame(this.raf_id)},bindEvents:function(){if(this.no_diapason){return}this.$cache.body.on("touchmove.irs_"+this.plugin_count,this.pointerMove.bind(this));this.$cache.body.on("mousemove.irs_"+this.plugin_count,this.pointerMove.bind(this));this.$cache.win.on("touchend.irs_"+this.plugin_count,this.pointerUp.bind(this));this.$cache.win.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this));this.$cache.line.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));this.$cache.line.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));this.$cache.line.on("focus.irs_"+this.plugin_count,this.pointerFocus.bind(this));if(this.options.drag_interval&&this.options.type==="double"){this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"both"));this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"both"))}else{this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))}if(this.options.type==="single"){this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single"));this.$cache.s_single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single"));this.$cache.shad_single.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single"));this.$cache.s_single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single"));this.$cache.edge.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));this.$cache.shad_single.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))}else{this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,null));this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,null));this.$cache.from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from"));this.$cache.s_from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from"));this.$cache.to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to"));this.$cache.s_to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to"));this.$cache.shad_from.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));this.$cache.shad_to.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));this.$cache.from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from"));this.$cache.s_from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from"));this.$cache.to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to"));this.$cache.s_to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to"));this.$cache.shad_from.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));this.$cache.shad_to.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))}if(this.options.keyboard){this.$cache.line.on("keydown.irs_"+this.plugin_count,this.key.bind(this,"keyboard"))}if(h){this.$cache.body.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this));this.$cache.body.on("mouseleave.irs_"+this.plugin_count,this.pointerUp.bind(this))}},pointerFocus:function(o){if(!this.target){var p;var n;if(this.options.type==="single"){n=this.$cache.single}else{n=this.$cache.from}p=n.offset().left;p+=(n.width()/2)-1;this.pointerClick("single",{preventDefault:function(){},pageX:p})}},pointerMove:function(n){if(!this.dragging){return}var o=n.pageX||n.originalEvent.touches&&n.originalEvent.touches[0].pageX;this.coords.x_pointer=o-this.coords.x_gap;this.calc()},pointerUp:function(n){if(this.current_plugin!==this.plugin_count){return}if(this.is_active){this.is_active=false}else{return}this.$cache.cont.find(".state_hover").removeClass("state_hover");this.force_redraw=true;if(h){a("*").prop("unselectable",false)}this.updateScene();this.restoreOriginalMinInterval();if(a.contains(this.$cache.cont[0],n.target)||this.dragging){this.callOnFinish()}this.dragging=false},pointerDown:function(o,n){n.preventDefault();var p=n.pageX||n.originalEvent.touches&&n.originalEvent.touches[0].pageX;if(n.button===2){return}if(o==="both"){this.setTempMinInterval()}if(!o){o=this.target||"from"}this.current_plugin=this.plugin_count;this.target=o;this.is_active=true;this.dragging=true;this.coords.x_gap=this.$cache.rs.offset().left;this.coords.x_pointer=p-this.coords.x_gap;this.calcPointerPercent();this.changeLevel(o);if(h){a("*").prop("unselectable",true)}this.$cache.line.trigger("focus");this.updateScene()},pointerClick:function(o,n){n.preventDefault();var p=n.pageX||n.originalEvent.touches&&n.originalEvent.touches[0].pageX;if(n.button===2){return}this.current_plugin=this.plugin_count;this.target=o;this.is_click=true;this.coords.x_gap=this.$cache.rs.offset().left;this.coords.x_pointer=+(p-this.coords.x_gap).toFixed();this.force_redraw=true;this.calc();this.$cache.line.trigger("focus")},key:function(o,n){if(this.current_plugin!==this.plugin_count||n.altKey||n.ctrlKey||n.shiftKey||n.metaKey){return}switch(n.which){case 83:case 65:case 40:case 37:n.preventDefault();this.moveByKey(false);break;case 87:case 68:case 38:case 39:n.preventDefault();this.moveByKey(true);break}return true},moveByKey:function(q){var n=this.coords.p_pointer;var o=(this.options.max-this.options.min)/100;o=this.options.step/o;if(q){n+=o}else{n-=o}this.coords.x_pointer=this.toFixed(this.coords.w_rs/100*n);this.is_key=true;this.calc()},setMinMax:function(){if(!this.options){return}if(this.options.hide_min_max){this.$cache.min[0].style.display="none";this.$cache.max[0].style.display="none";return}if(this.options.values.length){this.$cache.min.html(this.decorate(this.options.p_values[this.options.min]));this.$cache.max.html(this.decorate(this.options.p_values[this.options.max]))}else{var o=this._prettify(this.options.min);var n=this._prettify(this.options.max);this.result.min_pretty=o;this.result.max_pretty=n;this.$cache.min.html(this.decorate(o,this.options.min));this.$cache.max.html(this.decorate(n,this.options.max))}this.labels.w_min=this.$cache.min.outerWidth(false);this.labels.w_max=this.$cache.max.outerWidth(false)},setTempMinInterval:function(){var n=this.result.to-this.result.from;if(this.old_min_interval===null){this.old_min_interval=this.options.min_interval}this.options.min_interval=n},restoreOriginalMinInterval:function(){if(this.old_min_interval!==null){this.options.min_interval=this.old_min_interval;this.old_min_interval=null}},calc:function(z){if(!this.options){return}this.calc_count++;if(this.calc_count===10||z){this.calc_count=0;this.coords.w_rs=this.$cache.rs.outerWidth(false);this.calcHandlePercent()}if(!this.coords.w_rs){return}this.calcPointerPercent();var r=this.getHandleX();if(this.target==="both"){this.coords.p_gap=0;r=this.getHandleX()}if(this.target==="click"){this.coords.p_gap=this.coords.p_handle/2;r=this.getHandleX();if(this.options.drag_interval){this.target="both_one"}else{this.target=this.chooseHandle(r)}}switch(this.target){case"base":var A=(this.options.max-this.options.min)/100,n=(this.result.from-this.options.min)/A,x=(this.result.to-this.options.min)/A;this.coords.p_single_real=this.toFixed(n);this.coords.p_from_real=this.toFixed(n);this.coords.p_to_real=this.toFixed(x);this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);this.target=null;break;case"single":if(this.options.from_fixed){break}this.coords.p_single_real=this.convertToRealPercent(r);this.coords.p_single_real=this.calcWithStep(this.coords.p_single_real);this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max);this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);break;case"from":if(this.options.from_fixed){break}this.coords.p_from_real=this.convertToRealPercent(r);this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real);if(this.coords.p_from_real>this.coords.p_to_real){this.coords.p_from_real=this.coords.p_to_real}this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from");this.coords.p_from_real=this.checkMaxInterval(this.coords.p_from_real,this.coords.p_to_real,"from");this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);break;case"to":if(this.options.to_fixed){break}this.coords.p_to_real=this.convertToRealPercent(r);this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real);if(this.coords.p_to_real<this.coords.p_from_real){this.coords.p_to_real=this.coords.p_from_real}this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to");this.coords.p_to_real=this.checkMaxInterval(this.coords.p_to_real,this.coords.p_from_real,"to");this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both":if(this.options.from_fixed||this.options.to_fixed){break}r=this.toFixed(r+(this.coords.p_handle*0.001));this.coords.p_from_real=this.convertToRealPercent(r)-this.coords.p_gap_left;this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from");this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);this.coords.p_to_real=this.convertToRealPercent(r)+this.coords.p_gap_right;this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to");this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both_one":if(this.options.from_fixed||this.options.to_fixed){break}var v=this.convertToRealPercent(r),o=this.result.from_percent,y=this.result.to_percent,p=y-o,q=p/2,s=v-q,u=v+q;if(s<0){s=0;u=s+p}if(u>100){u=100;s=u-p}this.coords.p_from_real=this.calcWithStep(s);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);this.coords.p_to_real=this.calcWithStep(u);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break}if(this.options.type==="single"){this.coords.p_bar_x=(this.coords.p_handle/2);this.coords.p_bar_w=this.coords.p_single_fake;this.result.from_percent=this.coords.p_single_real;this.result.from=this.convertToValue(this.coords.p_single_real);this.result.from_pretty=this._prettify(this.result.from);if(this.options.values.length){this.result.from_value=this.options.values[this.result.from]}}else{this.coords.p_bar_x=this.toFixed(this.coords.p_from_fake+(this.coords.p_handle/2));this.coords.p_bar_w=this.toFixed(this.coords.p_to_fake-this.coords.p_from_fake);this.result.from_percent=this.coords.p_from_real;this.result.from=this.convertToValue(this.coords.p_from_real);this.result.from_pretty=this._prettify(this.result.from);this.result.to_percent=this.coords.p_to_real;this.result.to=this.convertToValue(this.coords.p_to_real);this.result.to_pretty=this._prettify(this.result.to);if(this.options.values.length){this.result.from_value=this.options.values[this.result.from];this.result.to_value=this.options.values[this.result.to]}}this.calcMinMax();this.calcLabels()},calcPointerPercent:function(){if(!this.coords.w_rs){this.coords.p_pointer=0;return}if(this.coords.x_pointer<0||isNaN(this.coords.x_pointer)){this.coords.x_pointer=0}else{if(this.coords.x_pointer>this.coords.w_rs){this.coords.x_pointer=this.coords.w_rs}}this.coords.p_pointer=this.toFixed(this.coords.x_pointer/this.coords.w_rs*100)},convertToRealPercent:function(n){var o=100-this.coords.p_handle;return n/o*100},convertToFakePercent:function(o){var n=100-this.coords.p_handle;return o/100*n},getHandleX:function(){var n=100-this.coords.p_handle,o=this.toFixed(this.coords.p_pointer-this.coords.p_gap);if(o<0){o=0}else{if(o>n){o=n}}return o},calcHandlePercent:function(){if(this.options.type==="single"){this.coords.w_handle=this.$cache.s_single.outerWidth(false)}else{this.coords.w_handle=this.$cache.s_from.outerWidth(false)}this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100)},chooseHandle:function(o){if(this.options.type==="single"){return"single"}else{var n=this.coords.p_from_real+((this.coords.p_to_real-this.coords.p_from_real)/2);if(o>=n){return this.options.to_fixed?"from":"to"}else{return this.options.from_fixed?"to":"from"}}},calcMinMax:function(){if(!this.coords.w_rs){return}this.labels.p_min=this.labels.w_min/this.coords.w_rs*100;this.labels.p_max=this.labels.w_max/this.coords.w_rs*100},calcLabels:function(){if(!this.coords.w_rs||this.options.hide_from_to){return}if(this.options.type==="single"){this.labels.w_single=this.$cache.single.outerWidth(false);this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100;this.labels.p_single_left=this.coords.p_single_fake+(this.coords.p_handle/2)-(this.labels.p_single_fake/2);this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single_fake)}else{this.labels.w_from=this.$cache.from.outerWidth(false);this.labels.p_from_fake=this.labels.w_from/this.coords.w_rs*100;this.labels.p_from_left=this.coords.p_from_fake+(this.coords.p_handle/2)-(this.labels.p_from_fake/2);this.labels.p_from_left=this.toFixed(this.labels.p_from_left);this.labels.p_from_left=this.checkEdges(this.labels.p_from_left,this.labels.p_from_fake);this.labels.w_to=this.$cache.to.outerWidth(false);this.labels.p_to_fake=this.labels.w_to/this.coords.w_rs*100;this.labels.p_to_left=this.coords.p_to_fake+(this.coords.p_handle/2)-(this.labels.p_to_fake/2);this.labels.p_to_left=this.toFixed(this.labels.p_to_left);this.labels.p_to_left=this.checkEdges(this.labels.p_to_left,this.labels.p_to_fake);this.labels.w_single=this.$cache.single.outerWidth(false);this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100;this.labels.p_single_left=((this.labels.p_from_left+this.labels.p_to_left+this.labels.p_to_fake)/2)-(this.labels.p_single_fake/2);this.labels.p_single_left=this.toFixed(this.labels.p_single_left);this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single_fake)}},updateScene:function(){if(this.raf_id){cancelAnimationFrame(this.raf_id);this.raf_id=null}clearTimeout(this.update_tm);this.update_tm=null;if(!this.options){return}this.drawHandles();if(this.is_active){this.raf_id=requestAnimationFrame(this.updateScene.bind(this))}else{this.update_tm=setTimeout(this.updateScene.bind(this),300)}},drawHandles:function(){this.coords.w_rs=this.$cache.rs.outerWidth(false);if(!this.coords.w_rs){return}if(this.coords.w_rs!==this.coords.w_rs_old){this.target="base";this.is_resize=true}if(this.coords.w_rs!==this.coords.w_rs_old||this.force_redraw){this.setMinMax();this.calc(true);this.drawLabels();if(this.options.grid){this.calcGridMargin();this.calcGridLabels()}this.force_redraw=true;this.coords.w_rs_old=this.coords.w_rs;this.drawShadow()}if(!this.coords.w_rs){return}if(!this.dragging&&!this.force_redraw&&!this.is_key){return}if(this.old_from!==this.result.from||this.old_to!==this.result.to||this.force_redraw||this.is_key){this.drawLabels();this.$cache.bar[0].style.left=this.coords.p_bar_x+"%";this.$cache.bar[0].style.width=this.coords.p_bar_w+"%";if(this.options.type==="single"){this.$cache.bar[0].style.left=0;this.$cache.bar[0].style.width=this.coords.p_bar_w+this.coords.p_bar_x+"%";this.$cache.s_single[0].style.left=this.coords.p_single_fake+"%";this.$cache.single[0].style.left=this.labels.p_single_left+"%"}else{this.$cache.s_from[0].style.left=this.coords.p_from_fake+"%";this.$cache.s_to[0].style.left=this.coords.p_to_fake+"%";if(this.old_from!==this.result.from||this.force_redraw){this.$cache.from[0].style.left=this.labels.p_from_left+"%"}if(this.old_to!==this.result.to||this.force_redraw){this.$cache.to[0].style.left=this.labels.p_to_left+"%"}this.$cache.single[0].style.left=this.labels.p_single_left+"%"}this.writeToInput();if((this.old_from!==this.result.from||this.old_to!==this.result.to)&&!this.is_start){this.$cache.input.trigger("change");this.$cache.input.trigger("input")}this.old_from=this.result.from;this.old_to=this.result.to;if(!this.is_resize&&!this.is_update&&!this.is_start&&!this.is_finish){this.callOnChange()}if(this.is_key||this.is_click){this.is_key=false;this.is_click=false;this.callOnFinish()}this.is_update=false;this.is_resize=false;this.is_finish=false}this.is_start=false;this.is_key=false;this.is_click=false;this.force_redraw=false},drawLabels:function(){if(!this.options){return}var x=this.options.values.length;var q=this.options.p_values;var t;var s;var u;var n;var w;if(this.options.hide_from_to){return}if(this.options.type==="single"){if(x){t=this.decorate(q[this.result.from]);this.$cache.single.html(t)}else{n=this._prettify(this.result.from);t=this.decorate(n,this.result.from);this.$cache.single.html(t)}this.calcLabels();if(this.labels.p_single_left<this.labels.p_min+1){this.$cache.min[0].style.visibility="hidden"}else{this.$cache.min[0].style.visibility="visible"}if(this.labels.p_single_left+this.labels.p_single_fake>100-this.labels.p_max-1){this.$cache.max[0].style.visibility="hidden"}else{this.$cache.max[0].style.visibility="visible"}}else{if(x){if(this.options.decorate_both){t=this.decorate(q[this.result.from]);t+=this.options.values_separator;t+=this.decorate(q[this.result.to])}else{t=this.decorate(q[this.result.from]+this.options.values_separator+q[this.result.to])}s=this.decorate(q[this.result.from]);u=this.decorate(q[this.result.to]);this.$cache.single.html(t);this.$cache.from.html(s);this.$cache.to.html(u)}else{n=this._prettify(this.result.from);w=this._prettify(this.result.to);if(this.options.decorate_both){t=this.decorate(n,this.result.from);t+=this.options.values_separator;t+=this.decorate(w,this.result.to)}else{t=this.decorate(n+this.options.values_separator+w,this.result.to)}s=this.decorate(n,this.result.from);u=this.decorate(w,this.result.to);this.$cache.single.html(t);this.$cache.from.html(s);this.$cache.to.html(u)}this.calcLabels();var p=Math.min(this.labels.p_single_left,this.labels.p_from_left),r=this.labels.p_single_left+this.labels.p_single_fake,v=this.labels.p_to_left+this.labels.p_to_fake,o=Math.max(r,v);if(this.labels.p_from_left+this.labels.p_from_fake>=this.labels.p_to_left){this.$cache.from[0].style.visibility="hidden";this.$cache.to[0].style.visibility="hidden";this.$cache.single[0].style.visibility="visible";if(this.result.from===this.result.to){if(this.target==="from"){this.$cache.from[0].style.visibility="visible"}else{if(this.target==="to"){this.$cache.to[0].style.visibility="visible"}else{if(!this.target){this.$cache.from[0].style.visibility="visible"}}}this.$cache.single[0].style.visibility="hidden";o=v}else{this.$cache.from[0].style.visibility="hidden";this.$cache.to[0].style.visibility="hidden";this.$cache.single[0].style.visibility="visible";o=Math.max(r,v)}}else{this.$cache.from[0].style.visibility="visible";this.$cache.to[0].style.visibility="visible";this.$cache.single[0].style.visibility="hidden"}if(p<this.labels.p_min+1){this.$cache.min[0].style.visibility="hidden"}else{this.$cache.min[0].style.visibility="visible"}if(o>100-this.labels.p_max-1){this.$cache.max[0].style.visibility="hidden"}else{this.$cache.max[0].style.visibility="visible"}}},drawShadow:function(){var v=this.options,n=this.$cache,s=typeof v.from_min==="number"&&!isNaN(v.from_min),r=typeof v.from_max==="number"&&!isNaN(v.from_max),u=typeof v.to_min==="number"&&!isNaN(v.to_min),t=typeof v.to_max==="number"&&!isNaN(v.to_max),q,p,x,w;if(v.type==="single"){if(v.from_shadow&&(s||r)){q=this.convertToPercent(s?v.from_min:v.min);p=this.convertToPercent(r?v.from_max:v.max)-q;q=this.toFixed(q-(this.coords.p_handle/100*q));p=this.toFixed(p-(this.coords.p_handle/100*p));q=q+(this.coords.p_handle/2);n.shad_single[0].style.display="block";n.shad_single[0].style.left=q+"%";n.shad_single[0].style.width=p+"%"}else{n.shad_single[0].style.display="none"}}else{if(v.from_shadow&&(s||r)){q=this.convertToPercent(s?v.from_min:v.min);p=this.convertToPercent(r?v.from_max:v.max)-q;q=this.toFixed(q-(this.coords.p_handle/100*q));p=this.toFixed(p-(this.coords.p_handle/100*p));q=q+(this.coords.p_handle/2);n.shad_from[0].style.display="block";n.shad_from[0].style.left=q+"%";n.shad_from[0].style.width=p+"%"}else{n.shad_from[0].style.display="none"}if(v.to_shadow&&(u||t)){x=this.convertToPercent(u?v.to_min:v.min);w=this.convertToPercent(t?v.to_max:v.max)-x;x=this.toFixed(x-(this.coords.p_handle/100*x));w=this.toFixed(w-(this.coords.p_handle/100*w));x=x+(this.coords.p_handle/2);n.shad_to[0].style.display="block";n.shad_to[0].style.left=x+"%";n.shad_to[0].style.width=w+"%"}else{n.shad_to[0].style.display="none"}}},writeToInput:function(){if(this.options.type==="single"){if(this.options.values.length){this.$cache.input.prop("value",this.result.from_value)}else{this.$cache.input.prop("value",this.result.from)}this.$cache.input.data("from",this.result.from)}else{if(this.options.values.length){this.$cache.input.prop("value",this.result.from_value+this.options.input_values_separator+this.result.to_value)}else{this.$cache.input.prop("value",this.result.from+this.options.input_values_separator+this.result.to)}this.$cache.input.data("from",this.result.from);this.$cache.input.data("to",this.result.to)}},callOnStart:function(){this.writeToInput();if(this.options.onStart&&typeof this.options.onStart==="function"){if(this.options.scope){this.options.onStart.call(this.options.scope,this.result)}else{this.options.onStart(this.result)}}},callOnChange:function(){this.writeToInput();if(this.options.onChange&&typeof this.options.onChange==="function"){if(this.options.scope){this.options.onChange.call(this.options.scope,this.result)}else{this.options.onChange(this.result)}}},callOnFinish:function(){this.writeToInput();if(this.options.onFinish&&typeof this.options.onFinish==="function"){if(this.options.scope){this.options.onFinish.call(this.options.scope,this.result)}else{this.options.onFinish(this.result)}}},callOnUpdate:function(){this.writeToInput();if(this.options.onUpdate&&typeof this.options.onUpdate==="function"){if(this.options.scope){this.options.onUpdate.call(this.options.scope,this.result)}else{this.options.onUpdate(this.result)}}},toggleInput:function(){this.$cache.input.toggleClass("irs-hidden-input");if(this.has_tab_index){this.$cache.input.prop("tabindex",-1)}else{this.$cache.input.removeProp("tabindex")}this.has_tab_index=!this.has_tab_index},convertToPercent:function(s,o){var n=this.options.max-this.options.min,p=n/100,r,q;if(!n){this.no_diapason=true;return 0}if(o){r=s}else{r=s-this.options.min}q=r/p;return this.toFixed(q)},convertToValue:function(w){var s=this.options.min,p=this.options.max,t=s.toString().split(".")[1],q=p.toString().split(".")[1],u,r,o=0,n=0;if(w===0){return this.options.min}if(w===100){return this.options.max}if(t){u=t.length;o=u}if(q){r=q.length;o=r}if(u&&r){o=(u>=r)?u:r}if(s<0){n=Math.abs(s);s=+(s+n).toFixed(o);p=+(p+n).toFixed(o)}var v=((p-s)/100*w)+s,y=this.options.step.toString().split(".")[1],x;if(y){v=+v.toFixed(y.length)}else{v=v/this.options.step;v=v*this.options.step;v=+v.toFixed(0)}if(n){v-=n}if(y){x=+v.toFixed(y.length)}else{x=this.toFixed(v)}if(x<this.options.min){x=this.options.min}else{if(x>this.options.max){x=this.options.max}}return x},calcWithStep:function(n){var o=Math.round(n/this.coords.p_step)*this.coords.p_step;if(o>100){o=100}if(n===100){o=100}return this.toFixed(o)},checkMinInterval:function(r,s,t){var q=this.options,n,p;if(!q.min_interval){return r}n=this.convertToValue(r);p=this.convertToValue(s);if(t==="from"){if(p-n<q.min_interval){n=p-q.min_interval}}else{if(n-p<q.min_interval){n=p+q.min_interval}}return this.convertToPercent(n)},checkMaxInterval:function(r,s,t){var q=this.options,n,p;if(!q.max_interval){return r}n=this.convertToValue(r);p=this.convertToValue(s);if(t==="from"){if(p-n>q.max_interval){n=p-q.max_interval}}else{if(n-p>q.max_interval){n=p+q.max_interval}}return this.convertToPercent(n)},checkDiapason:function(s,p,n){var q=this.convertToValue(s),r=this.options;if(typeof p!=="number"){p=r.min}if(typeof n!=="number"){n=r.max}if(q<p){q=p}if(q>n){q=n}return this.convertToPercent(q)},toFixed:function(n){n=n.toFixed(20);return +n},_prettify:function(n){if(!this.options.prettify_enabled){return n}if(this.options.prettify&&typeof this.options.prettify==="function"){return this.options.prettify(n)}else{return this.prettify(n)}},prettify:function(p){var o=p.toString();return o.replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+this.options.prettify_separator)},checkEdges:function(n,o){if(!this.options.force_edges){return this.toFixed(n)}if(n<0){n=0}else{if(n>100-o){n=100-o}}return this.toFixed(n)},validate:function(){var p=this.options,q=this.result,s=p.values,u=s.length,t,n;if(typeof p.min==="string"){p.min=+p.min}if(typeof p.max==="string"){p.max=+p.max}if(typeof p.from==="string"){p.from=+p.from}if(typeof p.to==="string"){p.to=+p.to}if(typeof p.step==="string"){p.step=+p.step}if(typeof p.from_min==="string"){p.from_min=+p.from_min}if(typeof p.from_max==="string"){p.from_max=+p.from_max}if(typeof p.to_min==="string"){p.to_min=+p.to_min}if(typeof p.to_max==="string"){p.to_max=+p.to_max}if(typeof p.grid_num==="string"){p.grid_num=+p.grid_num}if(p.max<p.min){p.max=p.min}if(u){p.p_values=[];p.min=0;p.max=u-1;p.step=1;p.grid_num=p.max;p.grid_snap=true;for(n=0;n<u;n++){t=+s[n];if(!isNaN(t)){s[n]=t;t=this._prettify(t)}else{t=s[n]}p.p_values.push(t)}}if(typeof p.from!=="number"||isNaN(p.from)){p.from=p.min}if(typeof p.to!=="number"||isNaN(p.to)){p.to=p.max}if(p.type==="single"){if(p.from<p.min){p.from=p.min}if(p.from>p.max){p.from=p.max}}else{if(p.from<p.min){p.from=p.min}if(p.from>p.max){p.from=p.max}if(p.to<p.min){p.to=p.min}if(p.to>p.max){p.to=p.max}if(this.update_check.from){if(this.update_check.from!==p.from){if(p.from>p.to){p.from=p.to}}if(this.update_check.to!==p.to){if(p.to<p.from){p.to=p.from}}}if(p.from>p.to){p.from=p.to}if(p.to<p.from){p.to=p.from}}if(typeof p.step!=="number"||isNaN(p.step)||!p.step||p.step<0){p.step=1}if(typeof p.from_min==="number"&&p.from<p.from_min){p.from=p.from_min}if(typeof p.from_max==="number"&&p.from>p.from_max){p.from=p.from_max}if(typeof p.to_min==="number"&&p.to<p.to_min){p.to=p.to_min}if(typeof p.to_max==="number"&&p.from>p.to_max){p.to=p.to_max}if(q){if(q.min!==p.min){q.min=p.min}if(q.max!==p.max){q.max=p.max}if(q.from<q.min||q.from>q.max){q.from=p.from}if(q.to<q.min||q.to>q.max){q.to=p.to}}if(typeof p.min_interval!=="number"||isNaN(p.min_interval)||!p.min_interval||p.min_interval<0){p.min_interval=0}if(typeof p.max_interval!=="number"||isNaN(p.max_interval)||!p.max_interval||p.max_interval<0){p.max_interval=0}if(p.min_interval&&p.min_interval>p.max-p.min){p.min_interval=p.max-p.min}if(p.max_interval&&p.max_interval>p.max-p.min){p.max_interval=p.max-p.min}},decorate:function(p,r){var n="",q=this.options;if(q.prefix){n+=q.prefix}n+=p;if(q.max_postfix){if(q.values.length&&p===q.p_values[q.max]){n+=q.max_postfix;if(q.postfix){n+=" "}}else{if(r===q.max){n+=q.max_postfix;if(q.postfix){n+=" "}}}}if(q.postfix){n+=q.postfix}return n},updateFrom:function(){this.result.from=this.options.from;this.result.from_percent=this.convertToPercent(this.result.from);this.result.from_pretty=this._prettify(this.result.from);if(this.options.values){this.result.from_value=this.options.values[this.result.from]}},updateTo:function(){this.result.to=this.options.to;this.result.to_percent=this.convertToPercent(this.result.to);this.result.to_pretty=this._prettify(this.result.to);if(this.options.values){this.result.to_value=this.options.values[this.result.to]}},updateResult:function(){this.result.min=this.options.min;this.result.max=this.options.max;this.updateFrom();this.updateTo()},appendGrid:function(){if(!this.options.grid){return}var u=this.options,s,B,A=u.max-u.min,n=u.grid_num,p=0,q=0,w=4,t,x,y=0,v,r="";this.calcGridMargin();if(u.grid_snap){n=A/u.step}if(n>50){n=50}p=this.toFixed(100/n);if(n>4){w=3}if(n>7){w=2}if(n>14){w=1}if(n>28){w=0}for(s=0;s<n+1;s++){t=w;q=this.toFixed(p*s);if(q>100){q=100}this.coords.big[s]=q;x=(q-(p*(s-1)))/(t+1);for(B=1;B<=t;B++){if(q===0){break}y=this.toFixed(q-(x*B));r+='<span class="irs-grid-pol small" style="left: '+y+'%"></span>'}r+='<span class="irs-grid-pol" style="left: '+q+'%"></span>';v=this.convertToValue(q);if(u.values.length){v=u.p_values[v]}else{v=this._prettify(v)}r+='<span class="irs-grid-text js-grid-text-'+s+'" style="left: '+q+'%">'+v+"</span>"}this.coords.big_num=Math.ceil(n+1);this.$cache.cont.addClass("irs-with-grid");this.$cache.grid.html(r);this.cacheGridLabels()},cacheGridLabels:function(){var n,o,p=this.coords.big_num;for(o=0;o<p;o++){n=this.$cache.grid.find(".js-grid-text-"+o);this.$cache.grid_labels.push(n)}this.calcGridLabels()},calcGridLabels:function(){var o,p,r=[],n=[],q=this.coords.big_num;for(o=0;o<q;o++){this.coords.big_w[o]=this.$cache.grid_labels[o].outerWidth(false);this.coords.big_p[o]=this.toFixed(this.coords.big_w[o]/this.coords.w_rs*100);this.coords.big_x[o]=this.toFixed(this.coords.big_p[o]/2);r[o]=this.toFixed(this.coords.big[o]-this.coords.big_x[o]);n[o]=this.toFixed(r[o]+this.coords.big_p[o])}if(this.options.force_edges){if(r[0]<-this.coords.grid_gap){r[0]=-this.coords.grid_gap;n[0]=this.toFixed(r[0]+this.coords.big_p[0]);this.coords.big_x[0]=this.coords.grid_gap}if(n[q-1]>100+this.coords.grid_gap){n[q-1]=100+this.coords.grid_gap;r[q-1]=this.toFixed(n[q-1]-this.coords.big_p[q-1]);this.coords.big_x[q-1]=this.toFixed(this.coords.big_p[q-1]-this.coords.grid_gap)}}this.calcGridCollision(2,r,n);this.calcGridCollision(4,r,n);for(o=0;o<q;o++){p=this.$cache.grid_labels[o][0];if(this.coords.big_x[o]!==Number.POSITIVE_INFINITY){p.style.marginLeft=-this.coords.big_x[o]+"%"}}},calcGridCollision:function(t,s,n){var o,q,p,r=this.coords.big_num;for(o=0;o<r;o+=t){q=o+(t/2);if(q>=r){break}p=this.$cache.grid_labels[q][0];if(n[o]<=s[q]){p.style.visibility="visible"}else{p.style.visibility="hidden"}}},calcGridMargin:function(){if(!this.options.grid_margin){return}this.coords.w_rs=this.$cache.rs.outerWidth(false);if(!this.coords.w_rs){return}if(this.options.type==="single"){this.coords.w_handle=this.$cache.s_single.outerWidth(false)}else{this.coords.w_handle=this.$cache.s_from.outerWidth(false)}this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100);this.coords.grid_gap=this.toFixed((this.coords.p_handle/2)-0.1);this.$cache.grid[0].style.width=this.toFixed(100-this.coords.p_handle)+"%";this.$cache.grid[0].style.left=this.coords.grid_gap+"%"},update:function(n){if(!this.input){return}this.is_update=true;this.options.from=this.result.from;this.options.to=this.result.to;this.update_check.from=this.result.from;this.update_check.to=this.result.to;this.options=a.extend(this.options,n);this.validate();this.updateResult(n);this.toggleInput();this.remove();this.init(true)},reset:function(){if(!this.input){return}this.updateResult();this.update()},destroy:function(){if(!this.input){return}this.toggleInput();this.$cache.input.prop("readonly",false);a.data(this.input,"ionRangeSlider",null);this.remove();this.input=null;this.options=null}};a.fn.ionRangeSlider=function(n){return this.each(function(){if(!a.data(this,"ionRangeSlider")){a.data(this,"ionRangeSlider",new g(this,n,j++))}})};(function(){var n=0;var o=["ms","moz","webkit","o"];for(var p=0;p<o.length&&!m.requestAnimationFrame;++p){m.requestAnimationFrame=m[o[p]+"RequestAnimationFrame"];m.cancelAnimationFrame=m[o[p]+"CancelAnimationFrame"]||m[o[p]+"CancelRequestAnimationFrame"]}if(!m.requestAnimationFrame){m.requestAnimationFrame=function(q,s){var r=new Date().getTime();var u=Math.max(0,16-(r-n));var t=m.setTimeout(function(){q(r+u)},u);n=r+u;return t}}if(!m.cancelAnimationFrame){m.cancelAnimationFrame=function(q){clearTimeout(q)}}}())}));