/* Scroller 2.0.1
 * Â©2011-2019 SpryMedia Ltd - datatables.net/license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","datatables.net"],function(b){return a(b,window,document)})}else{if(typeof exports==="object"){module.exports=function(c,b){if(!c){c=window}if(!b||!b.fn.dataTable){b=require("datatables.net")(c,b).$}return a(b,c,c.document)}}else{a(jQuery,window,document)}}}(function(a,g,d,f){var c=a.fn.dataTable;var e=function(h,j){if(!(this instanceof e)){alert("Scroller warning: Scroller must be initialised with the 'new' keyword.");return}if(j===f){j={}}var i=a.fn.dataTable.Api(h);this.s={dt:i.settings()[0],dtApi:i,tableTop:0,tableBottom:0,redrawTop:0,redrawBottom:0,autoHeight:true,viewportRows:0,stateTO:null,drawTO:null,heights:{jump:null,page:null,virtual:null,scroll:null,row:null,viewport:null,labelFactor:1},topRowFloat:0,scrollDrawDiff:null,loaderVisible:false,forceReposition:false,baseRowTop:0,baseScrollTop:0,mousedown:false,lastScrollTop:0};this.s=a.extend(this.s,e.oDefaults,j);this.s.heights.row=this.s.rowHeight;this.dom={force:d.createElement("div"),label:a('<div class="dts_label">0</div>'),scroller:null,table:null,loader:null};if(this.s.dt.oScroller){return}this.s.dt.oScroller=this;this.construct()};a.extend(e.prototype,{measure:function(j){if(this.s.autoHeight){this._calcRowHeight()}var h=this.s.heights;if(h.row){h.viewport=a.contains(d,this.dom.scroller)?this.dom.scroller.clientHeight:this._parseHeight(a(this.dom.scroller).css("height"));if(!h.viewport){h.viewport=this._parseHeight(a(this.dom.scroller).css("max-height"))}this.s.viewportRows=parseInt(h.viewport/h.row,10)+1;this.s.dt._iDisplayLength=this.s.viewportRows*this.s.displayBuffer}var i=this.dom.label.outerHeight();h.labelFactor=(h.viewport-i)/h.scroll;if(j===f||j){this.s.dt.oInstance.fnDraw(false)}},pageInfo:function(){var h=this.s.dt,j=this.dom.scroller.scrollTop,k=h.fnRecordsDisplay(),i=Math.ceil(this.pixelsToRow(j+this.s.heights.viewport,false,this.s.ani));return{start:Math.floor(this.pixelsToRow(j,false,this.s.ani)),end:k<i?k-1:i-1}},pixelsToRow:function(j,i,l){var h=j-this.s.baseScrollTop;var k=l?(this._domain("physicalToVirtual",this.s.baseScrollTop)+h)/this.s.heights.row:(h/this.s.heights.row)+this.s.baseRowTop;return i||i===f?parseInt(k,10):k},rowToPixels:function(k,i,l){var j;var h=k-this.s.baseRowTop;if(l){j=this._domain("virtualToPhysical",this.s.baseScrollTop);j+=h*this.s.heights.row}else{j=this.s.baseScrollTop;j+=h*this.s.heights.row}return i||i===f?parseInt(j,10):j},scrollToRow:function(m,i){var n=this;var h=false;var l=this.rowToPixels(m);var k=((this.s.displayBuffer-1)/2)*this.s.viewportRows;var j=m-k;if(j<0){j=0}if((l>this.s.redrawBottom||l<this.s.redrawTop)&&this.s.dt._iDisplayStart!==j){h=true;l=this._domain("virtualToPhysical",m*this.s.heights.row);if(this.s.redrawTop<l&&l<this.s.redrawBottom){this.s.forceReposition=true;i=false}}if(i===f||i){this.s.ani=h;a(this.dom.scroller).animate({scrollTop:l},function(){setTimeout(function(){n.s.ani=false},250)})}else{a(this.dom.scroller).scrollTop(l)}},construct:function(){var k=this;var h=this.s.dtApi;if(!this.s.dt.oFeatures.bPaginate){this.s.dt.oApi._fnLog(this.s.dt,0,"Pagination must be enabled for Scroller");return}this.dom.force.style.position="relative";this.dom.force.style.top="0px";this.dom.force.style.left="0px";this.dom.force.style.width="1px";this.dom.scroller=a("div."+this.s.dt.oClasses.sScrollBody,this.s.dt.nTableWrapper)[0];this.dom.scroller.appendChild(this.dom.force);this.dom.scroller.style.position="relative";this.dom.table=a(">table",this.dom.scroller)[0];this.dom.table.style.position="absolute";this.dom.table.style.top="0px";this.dom.table.style.left="0px";a(h.table().container()).addClass("dts DTS");if(this.s.loadingIndicator){this.dom.loader=a('<div class="dataTables_processing dts_loading">'+this.s.dt.oLanguage.sLoadingRecords+"</div>").css("display","none");a(this.dom.scroller.parentNode).css("position","relative").append(this.dom.loader)}this.dom.label.appendTo(this.dom.scroller);if(this.s.heights.row&&this.s.heights.row!="auto"){this.s.autoHeight=false}this.measure(false);this.s.ingnoreScroll=true;this.s.stateSaveThrottle=this.s.dt.oApi._fnThrottle(function(){k.s.dtApi.state.save()},500);a(this.dom.scroller).on("scroll.dt-scroller",function(l){k._scroll.call(k)});a(this.dom.scroller).on("touchstart.dt-scroller",function(){k._scroll.call(k)});a(this.dom.scroller).on("mousedown.dt-scroller",function(){k.s.mousedown=true}).on("mouseup.dt-scroller",function(){k.s.mouseup=false;k.dom.label.css("display","none")});a(g).on("resize.dt-scroller",function(){k.measure(false);k._info()});var i=true;var j=h.state.loaded();h.on("stateSaveParams.scroller",function(m,n,l){l.scroller={topRow:i&&j&&j.scroller?j.scroller.topRow:k.s.topRowFloat,baseScrollTop:k.s.baseScrollTop,baseRowTop:k.s.baseRowTop};i=false});if(j&&j.scroller){this.s.topRowFloat=j.scroller.topRow;this.s.baseScrollTop=j.scroller.baseScrollTop;this.s.baseRowTop=j.scroller.baseRowTop}h.on("init.scroller",function(){k.measure(false);k.s.scrollType="jump";k._draw();h.on("draw.scroller",function(){k._draw()})});h.on("preDraw.dt.scroller",function(){k._scrollForce()});h.on("destroy.scroller",function(){a(g).off("resize.dt-scroller");a(k.dom.scroller).off(".dt-scroller");a(k.s.dt.nTable).off(".scroller");a(k.s.dt.nTableWrapper).removeClass("DTS");a("div.DTS_Loading",k.dom.scroller.parentNode).remove();k.dom.table.style.position="";k.dom.table.style.top="";k.dom.table.style.left=""})},_calcRowHeight:function(){var i=this.s.dt;var l=i.nTable;var k=l.cloneNode(false);var n=a("<tbody/>").appendTo(k);var h=a('<div class="'+i.oClasses.sWrapper+' DTS"><div class="'+i.oClasses.sScrollWrapper+'"><div class="'+i.oClasses.sScrollBody+'"></div></div></div>');a("tbody tr:lt(4)",l).clone().appendTo(n);var m=a("tr",n).length;if(m===1){n.prepend("<tr><td>&#160;</td></tr>");n.append("<tr><td>&#160;</td></tr>")}else{for(;m<3;m++){n.append("<tr><td>&#160;</td></tr>")}}a("div."+i.oClasses.sScrollBody,h).append(k);var j=this.s.dt.nHolding||l.parentNode;if(!a(j).is(":visible")){j="body"}h.appendTo(j);this.s.heights.row=a("tr",n).eq(1).outerHeight();h.remove()},_draw:function(){var q=this,m=this.s.heights,n=this.dom.scroller.scrollTop,o=a(this.s.dt.nTable).height(),l=this.s.dt._iDisplayStart,k=this.s.dt._iDisplayLength,j=this.s.dt.fnRecordsDisplay();this.s.skip=true;if((this.s.dt.bSorted||this.s.dt.bFiltered)&&l===0&&!this.s.dt._drawHold){this.s.topRowFloat=0}n=this.s.scrollType==="jump"?this._domain("virtualToPhysical",this.s.topRowFloat*m.row):n;this.s.baseScrollTop=n;this.s.baseRowTop=this.s.topRowFloat;var p=n-((this.s.topRowFloat-l)*m.row);if(l===0){p=0}else{if(l+k>=j){p=m.scroll-o}}this.dom.table.style.top=p+"px";this.s.tableTop=p;this.s.tableBottom=o+this.s.tableTop;var i=(n-this.s.tableTop)*this.s.boundaryScale;this.s.redrawTop=n-i;this.s.redrawBottom=n+i>m.scroll-m.viewport-m.row?m.scroll-m.viewport-m.row:n+i;this.s.skip=false;if(this.s.dt.oFeatures.bStateSave&&this.s.dt.oLoadedState!==null&&typeof this.s.dt.oLoadedState.iScroller!="undefined"){var h=(this.s.dt.sAjaxSource||q.s.dt.ajax)&&!this.s.dt.oFeatures.bServerSide?true:false;if((h&&this.s.dt.iDraw==2)||(!h&&this.s.dt.iDraw==1)){setTimeout(function(){a(q.dom.scroller).scrollTop(q.s.dt.oLoadedState.iScroller);q.s.redrawTop=q.s.dt.oLoadedState.iScroller-(m.viewport/2);setTimeout(function(){q.s.ingnoreScroll=false},0)},0)}}else{q.s.ingnoreScroll=false}if(this.s.dt.oFeatures.bInfo){setTimeout(function(){q._info.call(q)},0)}if(this.dom.loader&&this.s.loaderVisible){this.dom.loader.css("display","none");this.s.loaderVisible=false}},_domain:function(j,o){var k=this.s.heights;var i;var n=10000;if(k.virtual===k.scroll){return o}if(o<n){return o}else{if(j==="virtualToPhysical"&&o>=k.virtual-n){i=k.virtual-o;return k.scroll-i}else{if(j==="physicalToVirtual"&&o>=k.scroll-n){i=k.scroll-o;return k.virtual-i}}}var l=(k.virtual-n-n)/(k.scroll-n-n);var h=n-(l*n);return j==="virtualToPhysical"?(o-h)/l:(l*o)+h},_info:function(){if(!this.s.dt.oFeatures.bInfo){return}var j=this.s.dt,t=j.oLanguage,q=this.dom.scroller.scrollTop,r=Math.floor(this.pixelsToRow(q,false,this.s.ani)+1),o=j.fnRecordsTotal(),s=j.fnRecordsDisplay(),p=Math.ceil(this.pixelsToRow(q+this.s.heights.viewport,false,this.s.ani)),l=s<p?s:p,y=j.fnFormatNumber(r),v=j.fnFormatNumber(l),w=j.fnFormatNumber(o),z=j.fnFormatNumber(s),x;if(j.fnRecordsDisplay()===0&&j.fnRecordsDisplay()==j.fnRecordsTotal()){x=t.sInfoEmpty+t.sInfoPostFix}else{if(j.fnRecordsDisplay()===0){x=t.sInfoEmpty+" "+t.sInfoFiltered.replace("_MAX_",w)+t.sInfoPostFix}else{if(j.fnRecordsDisplay()==j.fnRecordsTotal()){x=t.sInfo.replace("_START_",y).replace("_END_",v).replace("_MAX_",w).replace("_TOTAL_",z)+t.sInfoPostFix}else{x=t.sInfo.replace("_START_",y).replace("_END_",v).replace("_MAX_",w).replace("_TOTAL_",z)+" "+t.sInfoFiltered.replace("_MAX_",j.fnFormatNumber(j.fnRecordsTotal()))+t.sInfoPostFix}}}var h=t.fnInfoCallback;if(h){x=h.call(j.oInstance,j,r,l,o,s,x)}var u=j.aanFeatures.i;if(typeof u!="undefined"){for(var k=0,m=u.length;k<m;k++){a(u[k]).html(x)}}a(j.nTable).triggerHandler("info.dt")},_parseHeight:function(h){var i;var j=/^([+-]?(?:\d+(?:\.\d+)?|\.\d+))(px|em|rem|vh)$/.exec(h);if(j===null){return 0}var l=parseFloat(j[1]);var k=j[2];if(k==="px"){i=l}else{if(k==="vh"){i=(l/100)*a(g).height()}else{if(k==="rem"){i=l*parseFloat(a(":root").css("font-size"))}else{if(k==="em"){i=l*parseFloat(a("body").css("font-size"))}}}}return i?i:0},_scroll:function(){var m=this,i=this.s.heights,j=this.dom.scroller.scrollTop,k;if(this.s.skip){return}if(this.s.ingnoreScroll){return}if(j===this.s.lastScrollTop){return}if(this.s.dt.bFiltered||this.s.dt.bSorted){this.s.lastScrollTop=0;return}this._info();clearTimeout(this.s.stateTO);this.s.stateTO=setTimeout(function(){m.s.dtApi.state.save()},250);this.s.scrollType=Math.abs(j-this.s.lastScrollTop)>i.viewport?"jump":"cont";this.s.topRowFloat=this.s.scrollType==="cont"?this.pixelsToRow(j,false,false):this._domain("physicalToVirtual",j)/i.row;if(this.s.topRowFloat<0){this.s.topRowFloat=0}if(this.s.forceReposition||j<this.s.redrawTop||j>this.s.redrawBottom){var l=Math.ceil(((this.s.displayBuffer-1)/2)*this.s.viewportRows);k=parseInt(this.s.topRowFloat,10)-l;this.s.forceReposition=false;if(k<=0){k=0}else{if(k+this.s.dt._iDisplayLength>this.s.dt.fnRecordsDisplay()){k=this.s.dt.fnRecordsDisplay()-this.s.dt._iDisplayLength;if(k<0){k=0}}else{if(k%2!==0){k++}}}if(k!=this.s.dt._iDisplayStart){this.s.tableTop=a(this.s.dt.nTable).offset().top;this.s.tableBottom=a(this.s.dt.nTable).height()+this.s.tableTop;var h=function(){if(m.s.scrollDrawReq===null){m.s.scrollDrawReq=j}m.s.dt._iDisplayStart=k;m.s.dt.oApi._fnDraw(m.s.dt)};if(this.s.dt.oFeatures.bServerSide){clearTimeout(this.s.drawTO);this.s.drawTO=setTimeout(h,this.s.serverWait)}else{h()}if(this.dom.loader&&!this.s.loaderVisible){this.dom.loader.css("display","block");this.s.loaderVisible=true}}}else{this.s.topRowFloat=this.pixelsToRow(j,false,true)}this.s.lastScrollTop=j;this.s.stateSaveThrottle();if(this.s.scrollType==="jump"&&this.s.mousedown){this.dom.label.html(this.s.dt.fnFormatNumber(parseInt(this.s.topRowFloat,10)+1)).css("top",j+(j*i.labelFactor)).css("display","block")}},_scrollForce:function(){var h=this.s.heights;var i=1000000;h.virtual=h.row*this.s.dt.fnRecordsDisplay();h.scroll=h.virtual;if(h.scroll>i){h.scroll=i}this.dom.force.style.height=h.scroll>this.s.heights.row?h.scroll+"px":this.s.heights.row+"px"}});e.defaults={boundaryScale:0.5,displayBuffer:9,loadingIndicator:false,rowHeight:"auto",serverWait:200};e.oDefaults=e.defaults;e.version="2.0.1";a(d).on("preInit.dt.dtscroller",function(i,l){if(i.namespace!=="dt"){return}var j=l.oInit.scroller;var h=c.defaults.scroller;if(j||h){var k=a.extend({},j,h);if(j!==false){new e(l,k)}}});a.fn.dataTable.Scroller=e;a.fn.DataTable.Scroller=e;var b=a.fn.dataTable.Api;b.register("scroller()",function(){return this});b.register("scroller().rowToPixels()",function(j,i,k){var h=this.context;if(h.length&&h[0].oScroller){return h[0].oScroller.rowToPixels(j,i,k)}});b.register("scroller().pixelsToRow()",function(j,i,k){var h=this.context;if(h.length&&h[0].oScroller){return h[0].oScroller.pixelsToRow(j,i,k)}});b.register(["scroller().scrollToRow()","scroller.toPosition()"],function(i,h){this.iterator("table",function(j){if(j.oScroller){j.oScroller.scrollToRow(i,h)}});return this});b.register("row().scrollTo()",function(h){var i=this;this.iterator("row",function(j,l){if(j.oScroller){var k=i.rows({order:"applied",search:"applied"}).indexes().indexOf(l);j.oScroller.scrollToRow(k,h)}});return this});b.register("scroller.measure()",function(h){this.iterator("table",function(i){if(i.oScroller){i.oScroller.measure(h)}});return this});b.register("scroller.page()",function(){var h=this.context;if(h.length&&h[0].oScroller){return h[0].oScroller.pageInfo()}});return e}));