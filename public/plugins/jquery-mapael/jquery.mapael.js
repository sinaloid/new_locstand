/*
 *
 * Jquery Mapael - Dynamic maps jQuery plugin (based on raphael.js)
 * Requires jQuery, raphael.js and jquery.mousewheel
 *
 * Version: 2.2.0
 *
 * Copyright (c) 2017 Vincent Brout√© (https://www.vincentbroute.fr/mapael)
 * Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php).
 *
 * Thanks to Indigo744
 *
 */
(function(a){if(typeof exports==="object"){module.exports=a(require("jquery"),require("raphael"),require("jquery-mousewheel"))}else{if(typeof define==="function"&&define.amd){define(["jquery","raphael","mousewheel"],a)}else{a(jQuery,Raphael,jQuery.fn.mousewheel)}}}(function(a,e,c,f){var d="mapael";var g="2.2.0";var b=function(h,i){var j=this;j.container=h;j.$container=a(h);j.options=j.extendDefaultOptions(i);j.zoomTO=0;j.zoomCenterX=0;j.zoomCenterY=0;j.previousPinchDist=0;j.zoomData={zoomLevel:0,zoomX:0,zoomY:0,panX:0,panY:0};j.currentViewBox={x:0,y:0,w:0,h:0};j.panning=false;j.zoomAnimID=null;j.zoomAnimStartTime=null;j.zoomAnimCVBTarget=null;j.$map=a("."+j.options.map.cssClass,j.container);j.initialMapHTMLContent=j.$map.html();j.$tooltip={};j.paper={};j.areas={};j.plots={};j.links={};j.legends={};j.mapConf={};j.customEventHandlers={};j.init()};b.prototype={MouseOverFilteringTO:120,panningFilteringTO:150,panningEndFilteringTO:50,zoomFilteringTO:150,resizeFilteringTO:150,init:function(){var h=this;if(h.options.map.cssClass===""||a("."+h.options.map.cssClass,h.container).length===0){throw new Error("The map class `"+h.options.map.cssClass+"` doesn't exists")}h.$tooltip=a("<div>").addClass(h.options.map.tooltip.cssClass).css("display","none");h.$map.empty().append(h.$tooltip);if(a[d]&&a[d].maps&&a[d].maps[h.options.map.name]){h.mapConf=a[d].maps[h.options.map.name]}else{if(a.fn[d]&&a.fn[d].maps&&a.fn[d].maps[h.options.map.name]){h.mapConf=a.fn[d].maps[h.options.map.name];if(window.console&&window.console.warn){window.console.warn("Extending $.fn.mapael is deprecated (map '"+h.options.map.name+"')")}}else{throw new Error("Unknown map '"+h.options.map.name+"'")}}h.paper=new e(h.$map[0],h.mapConf.width,h.mapConf.height);if(h.isRaphaelBBoxBugPresent()===true){h.destroy();throw new Error("Can't get boundary box for text (is your container hidden? See #135)")}h.$container.addClass(d);if(h.options.map.tooltip.css){h.$tooltip.css(h.options.map.tooltip.css)}h.setViewBox(0,0,h.mapConf.width,h.mapConf.height);if(h.options.map.width){h.paper.setSize(h.options.map.width,h.mapConf.height*(h.options.map.width/h.mapConf.width))}else{h.initResponsiveSize()}a.each(h.mapConf.elems,function(i){h.areas[i]={};h.areas[i].options=h.getElemOptions(h.options.map.defaultArea,(h.options.areas[i]?h.options.areas[i]:{}),h.options.legend.area);h.areas[i].mapElem=h.paper.path(h.mapConf.elems[i])});if(h.options.map.beforeInit){h.options.map.beforeInit(h.$container,h.paper,h.options)}a.each(h.mapConf.elems,function(i){h.initElem(i,"area",h.areas[i])});h.links=h.drawLinksCollection(h.options.links);a.each(h.options.plots,function(i){h.plots[i]=h.drawPlot(i)});h.$container.on("zoom."+d,function(i,j){h.onZoomEvent(i,j)});if(h.options.map.zoom.enabled){h.initZoom(h.mapConf.width,h.mapConf.height,h.options.map.zoom)}if(h.options.map.zoom.init!==f){if(h.options.map.zoom.init.animDuration===f){h.options.map.zoom.init.animDuration=0}h.$container.trigger("zoom",h.options.map.zoom.init)}h.createLegends("area",h.areas,1);h.createLegends("plot",h.plots,h.paper.width/h.mapConf.width);h.$container.on("update."+d,function(i,j){h.onUpdateEvent(i,j)});h.$container.on("showElementsInRange."+d,function(i,j){h.onShowElementsInRange(i,j)});h.initDelegatedMapEvents();h.initDelegatedCustomEvents();if(h.options.map.afterInit){h.options.map.afterInit(h.$container,h.paper,h.areas,h.plots,h.options)}a(h.paper.desc).append(" and Mapael "+h.version+" (https://www.vincentbroute.fr/mapael/)")},destroy:function(){var h=this;h.$container.off("."+d);h.$map.off("."+d);if(h.onResizeEvent){a(window).off("resize."+d,h.onResizeEvent)}h.$map.empty();h.$map.html(h.initialMapHTMLContent);a.each(h.legends,function(i){a.each(h.legends[i],function(k){var j=h.legends[i][k];j.container.empty();j.container.html(j.initialHTMLContent)})});h.$container.removeClass(d);h.$container.removeData(d);h.container=f;h.$container=f;h.options=f;h.paper=f;h.$map=f;h.$tooltip=f;h.mapConf=f;h.areas=f;h.plots=f;h.links=f;h.customEventHandlers=f},initResponsiveSize:function(){var j=this;var i=null;var h=function(l){var k=j.$map.width();if(j.paper.width!==k){var m=k/j.mapConf.width;j.paper.setSize(k,j.mapConf.height*m);if(l!==true&&j.options.legend.redrawOnResize){j.createLegends("plot",j.plots,m)}}};j.onResizeEvent=function(){clearTimeout(i);i=setTimeout(function(){h()},j.resizeFilteringTO)};a(window).on("resize."+d,j.onResizeEvent);h(true)},extendDefaultOptions:function(h){h=a.extend(true,{},b.prototype.defaultOptions,h);a.each(["area","plot"],function(k,l){if(a.isArray(h.legend[l])){for(var j=0;j<h.legend[l].length;++j){h.legend[l][j]=a.extend(true,{},b.prototype.legendDefaultOptions[l],h.legend[l][j])}}else{h.legend[l]=a.extend(true,{},b.prototype.legendDefaultOptions[l],h.legend[l])}});return h},initDelegatedMapEvents:function(){var k=this;var h={area:k.areas,"area-text":k.areas,plot:k.plots,"plot-text":k.plots,link:k.links,"link-text":k.links};var j;k.$container.on("mouseover."+d,"[data-id]",function(){var l=this;clearTimeout(j);j=setTimeout(function(){var m=a(l);var n=m.attr("data-id");var q=m.attr("data-type");if(h[q]!==f){k.elemEnter(h[q][n])}else{if(q==="legend-elem"||q==="legend-label"){var o=m.attr("data-legend-id");var p=m.attr("data-legend-type");k.elemEnter(k.legends[p][o].elems[n])}}},k.MouseOverFilteringTO)});var i;k.$container.on("mousemove."+d,"[data-id]",function(m){var l=this;clearTimeout(i);i=setTimeout(function(){var n=a(l);var o=n.attr("data-id");var p=n.attr("data-type");if(h[p]!==f){k.elemHover(h[p][o],m)}else{if(p==="legend-elem"||p==="legend-label"){}}},0)});k.$container.on("mouseout."+d,"[data-id]",function(){var m=this;clearTimeout(j);clearTimeout(i);var l=a(m);var n=l.attr("data-id");var q=l.attr("data-type");if(h[q]!==f){k.elemOut(h[q][n])}else{if(q==="legend-elem"||q==="legend-label"){var o=l.attr("data-legend-id");var p=l.attr("data-legend-type");k.elemOut(k.legends[p][o].elems[n])}}});k.$container.on("click."+d,"[data-id]",function(m,q){var l=a(this);var n=l.attr("data-id");var r=l.attr("data-type");if(h[r]!==f){k.elemClick(h[r][n])}else{if(r==="legend-elem"||r==="legend-label"){var o=l.attr("data-legend-id");var p=l.attr("data-legend-type");k.handleClickOnLegendElem(k.legends[p][o].elems[n],n,o,p,q)}}})},initDelegatedCustomEvents:function(){var h=this;a.each(h.customEventHandlers,function(i){var j=i+"."+d+".custom";h.$container.off(j).on(j,"[data-id]",function(l){var k=a(this);var n=k.attr("data-id");var o=k.attr("data-type").replace("-text","");if(!h.panning&&h.customEventHandlers[i][o]!==f&&h.customEventHandlers[i][o][n]!==f){var m=h.customEventHandlers[i][o][n];m.options.eventHandlers[i](l,n,m.mapElem,m.textElem,m.options)}})})},initElem:function(j,m,i){var k=this;var h=a(i.mapElem.node);if(i.options.href){i.options.attrs.cursor="pointer";if(i.options.text){i.options.text.attrs.cursor="pointer"}}i.mapElem.attr(i.options.attrs);h.attr({"data-id":j,"data-type":m});if(i.options.cssClass!==f){h.addClass(i.options.cssClass)}if(i.options.text&&i.options.text.content!==f){var l=k.getTextPosition(i.mapElem.getBBox(),i.options.text.position,i.options.text.margin);i.options.text.attrs.text=i.options.text.content;i.options.text.attrs.x=l.x;i.options.text.attrs.y=l.y;i.options.text.attrs["text-anchor"]=l.textAnchor;i.textElem=k.paper.text(l.x,l.y,i.options.text.content);i.textElem.attr(i.options.text.attrs);a(i.textElem.node).attr({"data-id":j,"data-type":m+"-text"})}if(i.options.eventHandlers){k.setEventHandlers(j,m,i)}k.setHoverOptions(i.mapElem,i.options.attrs,i.options.attrsHover);if(i.textElem){k.setHoverOptions(i.textElem,i.options.text.attrs,i.options.text.attrsHover)}},initZoom:function(j,i,q){var p=this;var k=false;var n=0;var o=0;var h={reset:function(){p.$container.trigger("zoom",{level:0})},"in":function(){p.$container.trigger("zoom",{level:"+1"})},out:function(){p.$container.trigger("zoom",{level:-1})}};a.extend(p.zoomData,{zoomLevel:0,panX:0,panY:0});a.each(q.buttons,function(t,s){if(h[t]===f){throw new Error("Unknown zoom button '"+t+"'")}var r=a("<div>").addClass(s.cssClass).html(s.content).attr("title",s.title);r.on("click."+d,h[t]);p.$map.append(r)});if(p.options.map.zoom.mousewheel){p.$map.on("mousewheel."+d,function(s){var t=(s.deltaY>0)?1:-1;var r=p.mapPagePositionToXY(s.pageX,s.pageY);p.$container.trigger("zoom",{fixedCenter:true,level:p.zoomData.zoomLevel+t,x:r.x,y:r.y});s.preventDefault()})}if(p.options.map.zoom.touch){p.$map.on("touchstart."+d,function(r){if(r.originalEvent.touches.length===2){p.zoomCenterX=(r.originalEvent.touches[0].pageX+r.originalEvent.touches[1].pageX)/2;p.zoomCenterY=(r.originalEvent.touches[0].pageY+r.originalEvent.touches[1].pageY)/2;p.previousPinchDist=Math.sqrt(Math.pow((r.originalEvent.touches[1].pageX-r.originalEvent.touches[0].pageX),2)+Math.pow((r.originalEvent.touches[1].pageY-r.originalEvent.touches[0].pageY),2))}});p.$map.on("touchmove."+d,function(s){var t=0;var u=0;if(s.originalEvent.touches.length===2){t=Math.sqrt(Math.pow((s.originalEvent.touches[1].pageX-s.originalEvent.touches[0].pageX),2)+Math.pow((s.originalEvent.touches[1].pageY-s.originalEvent.touches[0].pageY),2));if(Math.abs(t-p.previousPinchDist)>15){var r=p.mapPagePositionToXY(p.zoomCenterX,p.zoomCenterY);u=(t-p.previousPinchDist)/Math.abs(t-p.previousPinchDist);p.$container.trigger("zoom",{fixedCenter:true,level:p.zoomData.zoomLevel+u,x:r.x,y:r.y});p.previousPinchDist=t}return false}})}p.$map.on("dragstart",function(){return false});var m=null;var l=null;a("body").on("mouseup."+d+(q.touch?" touchend."+d:""),function(){k=false;clearTimeout(m);clearTimeout(l);m=setTimeout(function(){p.panning=false},p.panningEndFilteringTO)});p.$map.on("mousedown."+d+(q.touch?" touchstart."+d:""),function(r){clearTimeout(m);clearTimeout(l);if(r.pageX!==f){k=true;n=r.pageX;o=r.pageY}else{if(r.originalEvent.touches.length===1){k=true;n=r.originalEvent.touches[0].pageX;o=r.originalEvent.touches[0].pageY}}}).on("mousemove."+d+(q.touch?" touchmove."+d:""),function(s){var r=p.zoomData.zoomLevel;var v=0;var w=0;clearTimeout(m);clearTimeout(l);if(s.pageX!==f){v=s.pageX;w=s.pageY}else{if(s.originalEvent.touches.length===1){v=s.originalEvent.touches[0].pageX;w=s.originalEvent.touches[0].pageY}else{k=false}}if(k&&r!==0){var t=(n-v)/(1+(r*q.step))*(j/p.paper.width);var u=(o-w)/(1+(r*q.step))*(i/p.paper.height);var x=Math.min(Math.max(0,p.currentViewBox.x+t),(j-p.currentViewBox.w));var y=Math.min(Math.max(0,p.currentViewBox.y+u),(i-p.currentViewBox.h));if(Math.abs(t)>5||Math.abs(u)>5){a.extend(p.zoomData,{panX:x,panY:y,zoomX:x+p.currentViewBox.w/2,zoomY:y+p.currentViewBox.h/2});p.setViewBox(x,y,p.currentViewBox.w,p.currentViewBox.h);l=setTimeout(function(){p.$map.trigger("afterPanning",{x1:x,y1:y,x2:(x+p.currentViewBox.w),y2:(y+p.currentViewBox.h)})},p.panningFilteringTO);n=v;o=w;p.panning=true}return false}})},mapPagePositionToXY:function(j,k){var l=this;var i=l.$map.offset();var h=(l.options.map.width)?(l.mapConf.width/l.options.map.width):(l.mapConf.width/l.$map.width());var m=1/(1+(l.zoomData.zoomLevel*l.options.map.zoom.step));return{x:(m*h*(j-i.left))+l.zoomData.panX,y:(m*h*(k-i.top))+l.zoomData.panY}},onZoomEvent:function(n,w){var u=this;var q;var r;var p;var o;var v=u.zoomData.zoomLevel;var s=1+u.zoomData.zoomLevel*u.options.map.zoom.step;var t;var h=(w.animDuration!==f)?w.animDuration:u.options.map.zoom.animDuration;if(w.area!==f){if(u.areas[w.area]===f){throw new Error("Unknown area '"+w.area+"'")}var l=(w.areaMargin!==f)?w.areaMargin:10;var i=u.areas[w.area].mapElem.getBBox();var k=i.width+2*l;var j=i.height+2*l;w.x=i.cx;w.y=i.cy;v=Math.min(Math.floor((u.mapConf.width/k-1)/u.options.map.zoom.step),Math.floor((u.mapConf.height/j-1)/u.options.map.zoom.step))}else{if(w.level!==f){if(typeof w.level==="string"){if((w.level.slice(0,1)==="+")||(w.level.slice(0,1)==="-")){v=u.zoomData.zoomLevel+parseInt(w.level,10)}else{v=parseInt(w.level,10)}}else{if(w.level<0){v=u.zoomData.zoomLevel+w.level}else{v=w.level}}}if(w.plot!==f){if(u.plots[w.plot]===f){throw new Error("Unknown plot '"+w.plot+"'")}w.x=u.plots[w.plot].coords.x;w.y=u.plots[w.plot].coords.y}else{if(w.latitude!==f&&w.longitude!==f){var m=u.mapConf.getCoords(w.latitude,w.longitude);w.x=m.x;w.y=m.y}if(w.x===f){w.x=u.currentViewBox.x+u.currentViewBox.w/2}if(w.y===f){w.y=u.currentViewBox.y+u.currentViewBox.h/2}}}v=Math.min(Math.max(v,u.options.map.zoom.minLevel),u.options.map.zoom.maxLevel);t=1+v*u.options.map.zoom.step;p=u.mapConf.width/t;o=u.mapConf.height/t;if(v===0){q=0;r=0}else{if(w.fixedCenter!==f&&w.fixedCenter===true){q=u.zoomData.panX+((w.x-u.zoomData.panX)*(t-s))/t;r=u.zoomData.panY+((w.y-u.zoomData.panY)*(t-s))/t}else{q=w.x-p/2;r=w.y-o/2}q=Math.min(Math.max(0,q),u.mapConf.width-p);r=Math.min(Math.max(0,r),u.mapConf.height-o)}if(t===s&&q===u.zoomData.panX&&r===u.zoomData.panY){return}if(h>0){u.animateViewBox(q,r,p,o,h,u.options.map.zoom.animEasing)}else{u.setViewBox(q,r,p,o);clearTimeout(u.zoomTO);u.zoomTO=setTimeout(function(){u.$map.trigger("afterZoom",{x1:q,y1:r,x2:q+p,y2:r+o})},u.zoomFilteringTO)}a.extend(u.zoomData,{zoomLevel:v,panX:q,panY:r,zoomX:q+p/2,zoomY:r+o/2})},onShowElementsInRange:function(h,i){var j=this;if(i.animDuration===f){i.animDuration=0}if(i.hiddenOpacity===f){i.hiddenOpacity=0.3}if(i.ranges&&i.ranges.area){j.showElemByRange(i.ranges.area,j.areas,i.hiddenOpacity,i.animDuration)}if(i.ranges&&i.ranges.plot){j.showElemByRange(i.ranges.plot,j.plots,i.hiddenOpacity,i.animDuration)}if(i.ranges&&i.ranges.link){j.showElemByRange(i.ranges.link,j.links,i.hiddenOpacity,i.animDuration)}if(i.afterShowRange){i.afterShowRange()}},showElemByRange:function(l,i,k,h){var m=this;var j={};if(l.min!==f||l.max!==f){l={0:l}}a.each(l,function(o){var n=l[o];if(n.min===f&&n.max===f){return true}a.each(i,function(q){var p=i[q].options.value;if(typeof p!=="object"){p=[p]}if(p[o]===f){return true}if((n.min!==f&&p[o]<n.min)||(n.max!==f&&p[o]>n.max)){j[q]=k}else{j[q]=1}})});a.each(j,function(n){m.setElementOpacity(i[n],j[n],h)})},setElementOpacity:function(i,j,h){var k=this;if(j>0){i.mapElem.show();if(i.textElem){i.textElem.show()}}k.animate(i.mapElem,{opacity:j},h,function(){if(j===0){i.mapElem.hide()}});k.animate(i.textElem,{opacity:j},h,function(){if(j===0){i.textElem.hide()}})},onUpdateEvent:function(k,p){var q=this;if(typeof p!=="object"){return}var n=0;var j=(p.animDuration)?p.animDuration:0;var l=function(i){q.animate(i.mapElem,{opacity:0},j,function(){i.mapElem.remove()});q.animate(i.textElem,{opacity:0},j,function(){i.textElem.remove()})};var m=function(i){i.mapElem.attr({opacity:0});if(i.textElem){i.textElem.attr({opacity:0})}q.setElementOpacity(i,(i.mapElem.originalAttrs.opacity!==f)?i.mapElem.originalAttrs.opacity:1,j)};if(typeof p.mapOptions==="object"){if(p.replaceOptions===true){q.options=q.extendDefaultOptions(p.mapOptions)}else{a.extend(true,q.options,p.mapOptions)}if(p.mapOptions.areas!==f||p.mapOptions.plots!==f||p.mapOptions.legend!==f){a("[data-type='legend-elem']",q.$container).each(function(r,i){if(a(i).attr("data-hidden")==="1"){a(i).trigger("click",{hideOtherElems:false,animDuration:j})}})}}if(typeof p.deletePlotKeys==="object"){for(;n<p.deletePlotKeys.length;n++){if(q.plots[p.deletePlotKeys[n]]!==f){l(q.plots[p.deletePlotKeys[n]]);delete q.plots[p.deletePlotKeys[n]]}}}else{if(p.deletePlotKeys==="all"){a.each(q.plots,function(r,i){l(i)});q.plots={}}}if(typeof p.deleteLinkKeys==="object"){for(n=0;n<p.deleteLinkKeys.length;n++){if(q.links[p.deleteLinkKeys[n]]!==f){l(q.links[p.deleteLinkKeys[n]]);delete q.links[p.deleteLinkKeys[n]]}}}else{if(p.deleteLinkKeys==="all"){a.each(q.links,function(r,i){l(i)});q.links={}}}if(typeof p.newPlots==="object"){a.each(p.newPlots,function(i){if(q.plots[i]===f){q.options.plots[i]=p.newPlots[i];q.plots[i]=q.drawPlot(i);if(j>0){m(q.plots[i])}}})}if(typeof p.newLinks==="object"){var o=q.drawLinksCollection(p.newLinks);a.extend(q.links,o);a.extend(q.options.links,p.newLinks);if(j>0){a.each(o,function(i){m(o[i])})}}a.each(q.areas,function(i){if((typeof p.mapOptions==="object"&&((typeof p.mapOptions.map==="object"&&typeof p.mapOptions.map.defaultArea==="object")||(typeof p.mapOptions.areas==="object"&&typeof p.mapOptions.areas[i]==="object")||(typeof p.mapOptions.legend==="object"&&typeof p.mapOptions.legend.area==="object")))||p.replaceOptions===true){q.areas[i].options=q.getElemOptions(q.options.map.defaultArea,(q.options.areas[i]?q.options.areas[i]:{}),q.options.legend.area);q.updateElem(q.areas[i],j)}});a.each(q.plots,function(i){if((typeof p.mapOptions==="object"&&((typeof p.mapOptions.map==="object"&&typeof p.mapOptions.map.defaultPlot==="object")||(typeof p.mapOptions.plots==="object"&&typeof p.mapOptions.plots[i]==="object")||(typeof p.mapOptions.legend==="object"&&typeof p.mapOptions.legend.plot==="object")))||p.replaceOptions===true){q.plots[i].options=q.getElemOptions(q.options.map.defaultPlot,(q.options.plots[i]?q.options.plots[i]:{}),q.options.legend.plot);q.setPlotCoords(q.plots[i]);q.setPlotAttributes(q.plots[i]);q.updateElem(q.plots[i],j)}});a.each(q.links,function(i){if((typeof p.mapOptions==="object"&&((typeof p.mapOptions.map==="object"&&typeof p.mapOptions.map.defaultLink==="object")||(typeof p.mapOptions.links==="object"&&typeof p.mapOptions.links[i]==="object")))||p.replaceOptions===true){q.links[i].options=q.getElemOptions(q.options.map.defaultLink,(q.options.links[i]?q.options.links[i]:{}),{});q.updateElem(q.links[i],j)}});if(p.mapOptions&&((typeof p.mapOptions.legend==="object")||(typeof p.mapOptions.map==="object"&&typeof p.mapOptions.map.defaultArea==="object")||(typeof p.mapOptions.map==="object"&&typeof p.mapOptions.map.defaultPlot==="object"))){a("[data-type='legend-elem']",q.$container).each(function(r,i){if(a(i).attr("data-hidden")==="1"){a(i).trigger("click",{hideOtherElems:false,animDuration:j})}});q.createLegends("area",q.areas,1);if(q.options.map.width){q.createLegends("plot",q.plots,(q.options.map.width/q.mapConf.width))}else{q.createLegends("plot",q.plots,(q.$map.width()/q.mapConf.width))}}if(typeof p.setLegendElemsState==="object"){a.each(p.setLegendElemsState,function(s,r){var i=q.$container.find("."+s)[0];if(i!==f){a("[data-type='legend-elem']",i).each(function(u,t){if((a(t).attr("data-hidden")==="0"&&r==="hide")||(a(t).attr("data-hidden")==="1"&&r==="show")){a(t).trigger("click",{hideOtherElems:false,animDuration:j})}})}})}else{var h=(p.setLegendElemsState==="hide")?"hide":"show";a("[data-type='legend-elem']",q.$container).each(function(r,i){if((a(i).attr("data-hidden")==="0"&&h==="hide")||(a(i).attr("data-hidden")==="1"&&h==="show")){a(i).trigger("click",{hideOtherElems:false,animDuration:j})}})}q.initDelegatedCustomEvents();if(p.afterUpdate){p.afterUpdate(q.$container,q.paper,q.areas,q.plots,q.options,q.links)}},setPlotCoords:function(i){var j=this;if(i.options.x!==f&&i.options.y!==f){i.coords={x:i.options.x,y:i.options.y}}else{if(i.options.plotsOn!==f&&j.areas[i.options.plotsOn]!==f){var h=j.areas[i.options.plotsOn].mapElem.getBBox();i.coords={x:h.cx,y:h.cy}}else{i.coords=j.mapConf.getCoords(i.options.latitude,i.options.longitude)}}},setPlotAttributes:function(h){if(h.options.type==="square"){h.options.attrs.width=h.options.size;h.options.attrs.height=h.options.size;h.options.attrs.x=h.coords.x-(h.options.size/2);h.options.attrs.y=h.coords.y-(h.options.size/2)}else{if(h.options.type==="image"){h.options.attrs.src=h.options.url;h.options.attrs.width=h.options.width;h.options.attrs.height=h.options.height;h.options.attrs.x=h.coords.x-(h.options.width/2);h.options.attrs.y=h.coords.y-(h.options.height/2)}else{if(h.options.type==="svg"){h.options.attrs.path=h.options.path;if(h.options.attrs.transform===f){h.options.attrs.transform=""}if(h.mapElem.originalBBox===f){h.mapElem.originalBBox=h.mapElem.getBBox()}h.mapElem.baseTransform="m"+(h.options.width/h.mapElem.originalBBox.width)+",0,0,"+(h.options.height/h.mapElem.originalBBox.height)+","+(h.coords.x-h.options.width/2)+","+(h.coords.y-h.options.height/2);h.options.attrs.transform=h.mapElem.baseTransform+h.options.attrs.transform}else{h.options.attrs.x=h.coords.x;h.options.attrs.y=h.coords.y;h.options.attrs.r=h.options.size/2}}}},drawLinksCollection:function(k){var n=this;var l={};var m={};var h={};var i={};var j={};a.each(k,function(p){var o=n.getElemOptions(n.options.map.defaultLink,k[p],{});if(typeof k[p].between[0]==="string"){l=n.options.plots[k[p].between[0]]}else{l=k[p].between[0]}if(typeof k[p].between[1]==="string"){m=n.options.plots[k[p].between[1]]}else{m=k[p].between[1]}if(l.plotsOn!==f&&n.areas[l.plotsOn]!==f){var q=n.areas[l.plotsOn].mapElem.getBBox();h={x:q.cx,y:q.cy}}else{if(l.latitude!==f&&l.longitude!==f){h=n.mapConf.getCoords(l.latitude,l.longitude)}else{h.x=l.x;h.y=l.y}}if(m.plotsOn!==f&&n.areas[m.plotsOn]!==f){var r=n.areas[m.plotsOn].mapElem.getBBox();i={x:r.cx,y:r.cy}}else{if(m.latitude!==f&&m.longitude!==f){i=n.mapConf.getCoords(m.latitude,m.longitude)}else{i.x=m.x;i.y=m.y}}j[p]=n.drawLink(p,h.x,h.y,i.x,i.y,o)});return j},drawLink:function(p,t,z,u,A,o){var r=this;var q={options:o};var v=(t+u)/2;var B=(z+A)/2;var j=-1/((A-z)/(u-t));var l=B-j*v;var i=Math.sqrt((u-t)*(u-t)+(A-z)*(A-z));var h=1+j*j;var k=-2*v+2*j*l-2*j*B;var m=v*v+l*l-l*B-B*l+B*B-((o.factor*i)*(o.factor*i));var n=k*k-4*h*m;var s=0;var w=0;if(o.factor>0){s=(-k+Math.sqrt(n))/(2*h);w=j*s+l}else{s=(-k-Math.sqrt(n))/(2*h);w=j*s+l}q.mapElem=r.paper.path("m "+t+","+z+" C "+s+","+w+" "+u+","+A+" "+u+","+A+"");r.initElem(p,"link",q);return q},isAttrsChanged:function(j,i){for(var h in i){if(i.hasOwnProperty(h)&&typeof j[h]==="undefined"||i[h]!==j[h]){return true}}return false},updateElem:function(i,h){var m=this;var j;var k;var l;if(i.options.toFront===true){i.mapElem.toFront()}if(i.options.href!==f){i.options.attrs.cursor="pointer";if(i.options.text){i.options.text.attrs.cursor="pointer"}}else{if(i.mapElem.attrs.cursor==="pointer"){i.options.attrs.cursor="auto";if(i.options.text){i.options.text.attrs.cursor="auto"}}}if(i.textElem){i.options.text.attrs.text=i.options.text.content;j=i.mapElem.getBBox();if(i.options.size||(i.options.width&&i.options.height)){if(i.options.type==="image"||i.options.type==="svg"){k=(i.options.width-j.width)/2;l=(i.options.height-j.height)/2}else{k=(i.options.size-j.width)/2;l=(i.options.size-j.height)/2}j.x-=k;j.x2+=k;j.y-=l;j.y2+=l}var n=m.getTextPosition(j,i.options.text.position,i.options.text.margin);i.options.text.attrs.x=n.x;i.options.text.attrs.y=n.y;i.options.text.attrs["text-anchor"]=n.textAnchor;m.setHoverOptions(i.textElem,i.options.text.attrs,i.options.text.attrsHover);if(m.isAttrsChanged(i.textElem.attrs,i.options.text.attrs)){m.animate(i.textElem,i.options.text.attrs,h)}}m.setHoverOptions(i.mapElem,i.options.attrs,i.options.attrsHover);if(m.isAttrsChanged(i.mapElem.attrs,i.options.attrs)){m.animate(i.mapElem,i.options.attrs,h)}if(i.options.cssClass!==f){a(i.mapElem.node).removeClass().addClass(i.options.cssClass)}},drawPlot:function(h){var j=this;var i={};i.options=j.getElemOptions(j.options.map.defaultPlot,(j.options.plots[h]?j.options.plots[h]:{}),j.options.legend.plot);j.setPlotCoords(i);if(i.options.type==="svg"){i.mapElem=j.paper.path(i.options.path)}j.setPlotAttributes(i);if(i.options.type==="square"){i.mapElem=j.paper.rect(i.options.attrs.x,i.options.attrs.y,i.options.attrs.width,i.options.attrs.height)}else{if(i.options.type==="image"){i.mapElem=j.paper.image(i.options.attrs.src,i.options.attrs.x,i.options.attrs.y,i.options.attrs.width,i.options.attrs.height)}else{if(i.options.type==="svg"){}else{i.mapElem=j.paper.circle(i.options.attrs.x,i.options.attrs.y,i.options.attrs.r)}}}j.initElem(h,"plot",i);return i},setEventHandlers:function(i,k,h){var j=this;a.each(h.options.eventHandlers,function(l){if(j.customEventHandlers[l]===f){j.customEventHandlers[l]={}}if(j.customEventHandlers[l][k]===f){j.customEventHandlers[l][k]={}}j.customEventHandlers[l][k][i]=h})},drawLegend:function(t,v,k,w,r){var z=this;var h={};var u={};var D=0;var l=0;var B=null;var C=null;var q={};var m=0;var E=0;var F=0;var G=0;var A=[];h=a("."+t.cssClass,z.$container);var n=h.html();h.empty();u=new e(h.get(0));a(u.canvas).attr({"data-legend-type":v,"data-legend-id":r});l=D=0;if(t.title&&t.title!==""){B=u.text(t.marginLeftTitle,0,t.title).attr(t.titleAttrs);C=B.getBBox();B.attr({y:0.5*C.height});D=t.marginLeftTitle+C.width;l+=t.marginBottomTitle+C.height}for(m=0;m<t.slices.length;++m){var H=0;A[m]=a.extend(true,{},(v==="plot")?z.options.map.defaultPlot:z.options.map.defaultArea,t.slices[m]);if(t.slices[m].legendSpecificAttrs===f){t.slices[m].legendSpecificAttrs={}}a.extend(true,A[m].attrs,t.slices[m].legendSpecificAttrs);if(v==="area"){if(A[m].attrs.width===f){A[m].attrs.width=30}if(A[m].attrs.height===f){A[m].attrs.height=20}}else{if(A[m].type==="square"){if(A[m].attrs.width===f){A[m].attrs.width=A[m].size}if(A[m].attrs.height===f){A[m].attrs.height=A[m].size}}else{if(A[m].type==="image"||A[m].type==="svg"){if(A[m].attrs.width===f){A[m].attrs.width=A[m].width}if(A[m].attrs.height===f){A[m].attrs.height=A[m].height}}else{if(A[m].attrs.r===f){A[m].attrs.r=A[m].size/2}}}}H=t.marginBottomTitle;if(B){H+=C.height}if(v==="plot"&&(A[m].type===f||A[m].type==="circle")){H+=w*A[m].attrs.r}else{H+=w*A[m].attrs.height/2}G=Math.max(G,H)}if(t.mode==="horizontal"){D=t.marginLeft}for(m=0;m<A.length;++m){var o={};var p={};var s={};if(A[m].display===f||A[m].display===true){if(v==="area"){if(t.mode==="horizontal"){E=D+t.marginLeft;F=G-(0.5*w*A[m].attrs.height)}else{E=t.marginLeft;F=l}o=u.rect(E,F,w*(A[m].attrs.width),w*(A[m].attrs.height))}else{if(A[m].type==="square"){if(t.mode==="horizontal"){E=D+t.marginLeft;F=G-(0.5*w*A[m].attrs.height)}else{E=t.marginLeft;F=l}o=u.rect(E,F,w*(A[m].attrs.width),w*(A[m].attrs.height))}else{if(A[m].type==="image"||A[m].type==="svg"){if(t.mode==="horizontal"){E=D+t.marginLeft;F=G-(0.5*w*A[m].attrs.height)}else{E=t.marginLeft;F=l}if(A[m].type==="image"){o=u.image(A[m].url,E,F,w*A[m].attrs.width,w*A[m].attrs.height)}else{o=u.path(A[m].path);if(A[m].attrs.transform===f){A[m].attrs.transform=""}p=o.getBBox();A[m].attrs.transform="m"+((w*A[m].width)/p.width)+",0,0,"+((w*A[m].height)/p.height)+","+E+","+F+A[m].attrs.transform}}else{if(t.mode==="horizontal"){E=D+t.marginLeft+w*(A[m].attrs.r);F=G}else{E=t.marginLeft+w*(A[m].attrs.r);F=l+w*(A[m].attrs.r)}o=u.circle(E,F,w*(A[m].attrs.r))}}}delete A[m].attrs.width;delete A[m].attrs.height;delete A[m].attrs.r;o.attr(A[m].attrs);p=o.getBBox();if(t.mode==="horizontal"){E=D+t.marginLeft+p.width+t.marginLeftLabel;F=G}else{E=t.marginLeft+p.width+t.marginLeftLabel;F=l+(p.height/2)}s=u.text(E,F,A[m].label).attr(t.labelAttrs);if(t.mode==="horizontal"){var j=t.marginBottom+p.height;D+=t.marginLeft+p.width+t.marginLeftLabel+s.getBBox().width;if(A[m].type!=="image"&&v!=="area"){j+=t.marginBottomTitle}if(B){j+=C.height}l=Math.max(l,j)}else{D=Math.max(D,t.marginLeft+p.width+t.marginLeftLabel+s.getBBox().width);l+=t.marginBottom+p.height}a(o.node).attr({"data-legend-id":r,"data-legend-type":v,"data-type":"legend-elem","data-id":m,"data-hidden":0});a(s.node).attr({"data-legend-id":r,"data-legend-type":v,"data-type":"legend-label","data-id":m,"data-hidden":0});q[m]={mapElem:o,textElem:s};if(t.hideElemsOnClick.enabled){s.attr({cursor:"pointer"});o.attr({cursor:"pointer"});z.setHoverOptions(o,A[m].attrs,A[m].attrs);z.setHoverOptions(s,t.labelAttrs,t.labelAttrsHover);if(A[m].clicked!==f&&A[m].clicked===true){z.handleClickOnLegendElem(q[m],m,r,v,{hideOtherElems:false})}}}}if(e.type!=="SVG"&&t.VMLWidth){D=t.VMLWidth}u.setSize(D,l);return{container:h,initialHTMLContent:n,elems:q}},handleClickOnLegendElem:function(k,n,p,s,u){var v=this;var r;u=u||{};if(!a.isArray(v.options.legend[s])){r=v.options.legend[s]}else{r=v.options.legend[s][p]}var o=k.mapElem;var q=k.textElem;var h=a(o.node);var i=a(q.node);var w=r.slices[n];var t=s==="area"?v.areas:v.plots;var j=u.animDuration!==f?u.animDuration:r.hideElemsOnClick.animDuration;var l=h.attr("data-hidden");var m=(l==="0")?{"data-hidden":"1"}:{"data-hidden":"0"};if(l==="0"){v.animate(q,{opacity:0.5},j)}else{v.animate(q,{opacity:1},j)}a.each(t,function(A){var x;var z=t[A].mapElem.data("hidden-by");if(z===f){z={}}if(a.isArray(t[A].options.value)){x=t[A].options.value[p]}else{x=t[A].options.value}if(v.getLegendSlice(x,r)===w){if(l==="0"){z[p]=true;v.setElementOpacity(t[A],r.hideElemsOnClick.opacity,j)}else{delete z[p];if(a.isEmptyObject(z)){v.setElementOpacity(t[A],t[A].mapElem.originalAttrs.opacity!==f?t[A].mapElem.originalAttrs.opacity:1,j)}}t[A].mapElem.data("hidden-by",z)}});h.attr(m);i.attr(m);if((u.hideOtherElems===f||u.hideOtherElems===true)&&r.exclusive===true){a("[data-type='legend-elem'][data-hidden=0]",v.$container).each(function(){var x=a(this);if(x.attr("data-id")!==n){x.trigger("click",{hideOtherElems:false})}})}},createLegends:function(l,h,m){var n=this;var k=n.options.legend[l];if(!a.isArray(n.options.legend[l])){k=[n.options.legend[l]]}n.legends[l]={};for(var i=0;i<k.length;++i){if(k[i].display===true&&a.isArray(k[i].slices)&&k[i].slices.length>0&&k[i].cssClass!==""&&a("."+k[i].cssClass,n.$container).length!==0){n.legends[l][i]=n.drawLegend(k[i],l,h,m,i)}}},setHoverOptions:function(i,j,h){if(e.type!=="SVG"){delete h.transform}i.attrsHover=h;if(i.attrsHover.transform){i.originalAttrs=a.extend({transform:"s1"},j)}else{i.originalAttrs=j}},elemEnter:function(i){var j=this;if(i===f){return}if(i.mapElem!==f){j.animate(i.mapElem,i.mapElem.attrsHover,i.mapElem.attrsHover.animDuration)}if(i.textElem!==f){j.animate(i.textElem,i.textElem.attrsHover,i.textElem.attrsHover.animDuration)}if(i.options&&i.options.tooltip!==f){var h="";j.$tooltip.removeClass().addClass(j.options.map.tooltip.cssClass);if(i.options.tooltip.content!==f){if(typeof i.options.tooltip.content==="function"){h=i.options.tooltip.content(i.mapElem)}else{h=i.options.tooltip.content}}if(i.options.tooltip.cssClass!==f){j.$tooltip.addClass(i.options.tooltip.cssClass)}j.$tooltip.html(h).css("display","block")}if(i.mapElem!==f||i.textElem!==f){if(j.paper.safari){j.paper.safari()}}},elemHover:function(h,i){var n=this;if(h===f){return}if(h.options.tooltip!==f){var j=i.pageX;var k=i.pageY;var l=10;var m=20;if(typeof h.options.tooltip.offset==="object"){if(typeof h.options.tooltip.offset.left!=="undefined"){l=h.options.tooltip.offset.left}if(typeof h.options.tooltip.offset.top!=="undefined"){m=h.options.tooltip.offset.top}}var o={left:Math.min(n.$map.width()-n.$tooltip.outerWidth()-5,j-n.$map.offset().left+l),top:Math.min(n.$map.height()-n.$tooltip.outerHeight()-5,k-n.$map.offset().top+m)};if(typeof h.options.tooltip.overflow==="object"){if(h.options.tooltip.overflow.right===true){o.left=j-n.$map.offset().left+10}if(h.options.tooltip.overflow.bottom===true){o.top=k-n.$map.offset().top+20}}n.$tooltip.css(o)}},elemOut:function(h){var i=this;if(h===f){return}if(h.mapElem!==f){i.animate(h.mapElem,h.mapElem.originalAttrs,h.mapElem.attrsHover.animDuration)}if(h.textElem!==f){i.animate(h.textElem,h.textElem.originalAttrs,h.textElem.attrsHover.animDuration)}if(h.options&&h.options.tooltip!==f){i.$tooltip.css({display:"none",top:-1000,left:-1000})}if(h.mapElem!==f||h.textElem!==f){if(i.paper.safari){i.paper.safari()}}},elemClick:function(h){var i=this;if(h===f){return}if(!i.panning&&h.options.href!==f){window.open(h.options.href,h.options.target)}},getElemOptions:function(h,j,l){var n=this;var m=a.extend(true,{},h,j);if(m.value!==f){if(a.isArray(l)){for(var k=0;k<l.length;++k){m=a.extend(true,{},m,n.getLegendSlice(m.value[k],l[k]))}}else{m=a.extend(true,{},m,n.getLegendSlice(m.value,l))}}return m},getTextPosition:function(h,k,i){var l=0;var m=0;var j="";if(typeof i==="number"){if(k==="bottom"||k==="top"){i={x:0,y:i}}else{if(k==="right"||k==="left"){i={x:i,y:0}}else{i={x:0,y:0}}}}switch(k){case"bottom":l=((h.x+h.x2)/2)+i.x;m=h.y2+i.y;j="middle";break;case"top":l=((h.x+h.x2)/2)+i.x;m=h.y-i.y;j="middle";break;case"left":l=h.x-i.x;m=((h.y+h.y2)/2)+i.y;j="end";break;case"right":l=h.x2+i.x;m=((h.y+h.y2)/2)+i.y;j="start";break;default:l=((h.x+h.x2)/2)+i.x;m=((h.y+h.y2)/2)+i.y;j="middle"}return{x:l,y:m,textAnchor:j}},getLegendSlice:function(k,j){for(var h=0;h<j.slices.length;++h){if((j.slices[h].sliceValue!==f&&k===j.slices[h].sliceValue)||((j.slices[h].sliceValue===f)&&(j.slices[h].min===f||k>=j.slices[h].min)&&(j.slices[h].max===f||k<=j.slices[h].max))){return j.slices[h]}}return{}},animateViewBox:function(y,z,x,w,n,t){var v=this;var k=v.currentViewBox.x;var q=y-k;var l=v.currentViewBox.y;var r=z-l;var j=v.currentViewBox.w;var p=x-j;var h=v.currentViewBox.h;var m=w-h;if(!v.zoomAnimCVBTarget){v.zoomAnimCVBTarget={x:y,y:z,w:x,h:w}}var A=(j>x)?"in":"out";var s=e.easing_formulas[t||"linear"];var o=n-(n*2/100);var u=v.zoomAnimStartTime;v.zoomAnimStartTime=(new Date()).getTime();var i=function(){v.cancelAnimationFrame(v.zoomAnimID);var B=(new Date()).getTime()-v.zoomAnimStartTime;if(B<o){var H,I,G,C;if(u&&v.zoomAnimCVBTarget&&v.zoomAnimCVBTarget.w!==x){var E=(new Date()).getTime()-u;var F=s(E/n);H=k+(v.zoomAnimCVBTarget.x-k)*F;I=l+(v.zoomAnimCVBTarget.y-l)*F;G=j+(v.zoomAnimCVBTarget.w-j)*F;C=h+(v.zoomAnimCVBTarget.h-h)*F;k=H;q=y-k;l=I;r=z-l;j=G;p=x-j;h=C;m=w-h;v.zoomAnimCVBTarget={x:y,y:z,w:x,h:w}}else{var D=s(B/n);H=k+q*D;I=l+r*D;G=j+p*D;C=h+m*D}if(A==="in"&&(G>v.currentViewBox.w||G<x)){}else{if(A==="out"&&(G<v.currentViewBox.w||G>x)){}else{v.setViewBox(H,I,G,C)}}v.zoomAnimID=v.requestAnimationFrame(i)}else{v.zoomAnimStartTime=null;v.zoomAnimCVBTarget=null;if(v.currentViewBox.w!==x){v.setViewBox(y,z,x,w)}v.$map.trigger("afterZoom",{x1:y,y1:z,x2:(y+x),y2:(z+w)})}};i()},requestAnimationFrame:function(h){return this._requestAnimationFrameFn.call(window,h)},cancelAnimationFrame:function(h){this._cancelAnimationFrameFn.call(window,h)},_requestAnimationFrameFn:(function(){var h=(function(){var i=(new Date()).getTime();return function(j){var k=(new Date()).getTime();if(k-i>16){i=k;j(k)}else{return setTimeout(function(){h(j)},0)}}})();return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||h})(),_cancelAnimationFrameFn:(function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||clearTimeout})(),setViewBox:function(l,m,k,i){var j=this;j.currentViewBox.x=l;j.currentViewBox.y=m;j.currentViewBox.w=k;j.currentViewBox.h=i;j.paper.setViewBox(l,m,k,i,false)},_nonAnimatedAttrs:["arrow-end","arrow-start","gradient","class","cursor","text-anchor","font","font-family","font-style","font-weight","letter-spacing","src","href","target","title","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit"],animate:function(n,j,m,l){var p=this;if(!n){return}if(m>0){var k={};for(var o=0;o<p._nonAnimatedAttrs.length;o++){var h=p._nonAnimatedAttrs[o];if(j[h]!==f){k[h]=j[h]}}n.attr(k);n.animate(j,m,"linear",function(){if(l){l()}})}else{n.attr(j);if(l){l()}}},isRaphaelBBoxBugPresent:function(){var h=this;var i=h.paper.text(-50,-50,"TEST");var j=i.getBBox();i.remove();return(j.width===0&&j.height===0)},defaultOptions:{map:{cssClass:"map",tooltip:{cssClass:"mapTooltip"},defaultArea:{attrs:{fill:"#343434",stroke:"#5d5d5d","stroke-width":1,"stroke-linejoin":"round"},attrsHover:{fill:"#f38a03",animDuration:300},text:{position:"inner",margin:10,attrs:{"font-size":15,fill:"#c7c7c7"},attrsHover:{fill:"#eaeaea",animDuration:300}},target:"_self",cssClass:"area"},defaultPlot:{type:"circle",size:15,attrs:{fill:"#0088db",stroke:"#fff","stroke-width":0,"stroke-linejoin":"round"},attrsHover:{"stroke-width":3,animDuration:300},text:{position:"right",margin:10,attrs:{"font-size":15,fill:"#c7c7c7"},attrsHover:{fill:"#eaeaea",animDuration:300}},target:"_self",cssClass:"plot"},defaultLink:{factor:0.5,attrs:{stroke:"#0088db","stroke-width":2},attrsHover:{animDuration:300},text:{position:"inner",margin:10,attrs:{"font-size":15,fill:"#c7c7c7"},attrsHover:{fill:"#eaeaea",animDuration:300}},target:"_self",cssClass:"link"},zoom:{enabled:false,minLevel:0,maxLevel:10,step:0.25,mousewheel:true,touch:true,animDuration:200,animEasing:"linear",buttons:{reset:{cssClass:"zoomButton zoomReset",content:"&#8226;",title:"Reset zoom"},"in":{cssClass:"zoomButton zoomIn",content:"+",title:"Zoom in"},out:{cssClass:"zoomButton zoomOut",content:"&#8722;",title:"Zoom out"}}}},legend:{redrawOnResize:true,area:[],plot:[]},areas:{},plots:{},links:{}},legendDefaultOptions:{area:{cssClass:"areaLegend",display:true,marginLeft:10,marginLeftTitle:5,marginBottomTitle:10,marginLeftLabel:10,marginBottom:10,titleAttrs:{"font-size":16,fill:"#343434","text-anchor":"start"},labelAttrs:{"font-size":12,fill:"#343434","text-anchor":"start"},labelAttrsHover:{fill:"#787878",animDuration:300},hideElemsOnClick:{enabled:true,opacity:0.2,animDuration:300},slices:[],mode:"vertical"},plot:{cssClass:"plotLegend",display:true,marginLeft:10,marginLeftTitle:5,marginBottomTitle:10,marginLeftLabel:10,marginBottom:10,titleAttrs:{"font-size":16,fill:"#343434","text-anchor":"start"},labelAttrs:{"font-size":12,fill:"#343434","text-anchor":"start"},labelAttrsHover:{fill:"#787878",animDuration:300},hideElemsOnClick:{enabled:true,opacity:0.2,animDuration:300},slices:[],mode:"vertical"}}};b.version=g;if(a[d]===f){a[d]=b}a.fn[d]=function(h){return this.each(function(){if(a.data(this,d)){a.data(this,d).destroy()}a.data(this,d,new b(this,h))})};return b}));