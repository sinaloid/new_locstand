(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof module==="object"&&module.exports){module.exports=function(c,b){if(b===undefined){if(typeof window!=="undefined"){b=require("jquery")}else{b=require("jquery")(c)}}a(b);return b}}else{a(jQuery)}}}(function(a){var l="bootstrapDualListbox",f={filterTextClear:"show all",filterPlaceHolder:"Filter",moveSelectedLabel:"Move selected",moveAllLabel:"Move all",removeSelectedLabel:"Remove selected",removeAllLabel:"Remove all",moveOnSelect:true,moveOnDoubleClick:true,preserveSelectionOnMove:false,selectedListLabel:false,nonSelectedListLabel:false,helperSelectNamePostfix:"_helper",selectorMinimalHeight:100,showFilterInputs:true,nonSelectedFilter:"",selectedFilter:"",infoText:"Showing all {0}",infoTextFiltered:'<span class="badge badge-warning">Filtered</span> {0} from {1}',infoTextEmpty:"Empty list",filterOnValues:false,sortByInputOrder:false,eventMoveOverride:false,eventMoveAllOverride:false,eventRemoveOverride:false,eventRemoveAllOverride:false,btnClass:"btn-outline-secondary",btnMoveText:"&gt;",btnRemoveText:"&lt;",btnMoveAllText:"&gt;&gt;",btnRemoveAllText:"&lt;&lt;"},i=/android/i.test(navigator.userAgent.toLowerCase());function c(v,w){this.element=a(v);this.settings=a.extend({},f,w);this._defaults=f;this._name=l;this.init()}function t(v){v.element.trigger("change")}function u(v){v.element.find("option").each(function(x,y){var w=a(y);if(typeof(w.data("original-index"))==="undefined"){w.data("original-index",v.elementCount++)}if(typeof(w.data("_selected"))==="undefined"){w.data("_selected",false)}})}function d(v,w,x){v.element.find("option").each(function(z,A){var y=a(A);if(y.data("original-index")===w){y.prop("selected",x);if(x){y.attr("data-sortindex",v.sortIndex);v.sortIndex++}else{y.removeAttr("data-sortindex")}}})}function h(w,v){console.log(w,v);return w.replace(/{(\d+)}/g,function(x,y){return typeof v[y]!=="undefined"?v[y]:x})}function m(y){if(!y.settings.infoText){return}var z=y.elements.select1.find("option").length,A=y.elements.select2.find("option").length,v=y.element.find("option").length-y.selectedElements,w=y.selectedElements,x="";if(v===0){x=y.settings.infoTextEmpty}else{if(z===v){x=h(y.settings.infoText,[z,v])}else{x=h(y.settings.infoTextFiltered,[z,v])}}y.elements.info1.html(x);y.elements.box1.toggleClass("filtered",!(z===v||v===0));if(w===0){x=y.settings.infoTextEmpty}else{if(A===w){x=h(y.settings.infoText,[A,w])}else{x=h(y.settings.infoTextFiltered,[A,w])}}y.elements.info2.html(x);y.elements.box2.toggleClass("filtered",!(A===w||w===0))}function n(v){v.selectedElements=0;v.elements.select1.empty();v.elements.select2.empty();v.element.find("option").each(function(x,y){var w=a(y);if(w.prop("selected")){v.selectedElements++;v.elements.select2.append(w.clone(true).prop("selected",w.data("_selected")))}else{v.elements.select1.append(w.clone(true).prop("selected",w.data("_selected")))}});if(v.settings.showFilterInputs){g(v,1);g(v,2)}m(v)}function g(w,A){if(!w.settings.showFilterInputs){return}q(w,A);w.elements["select"+A].empty().scrollTop(0);var z,v=w.element.find("option"),y=w.element;if(A===1){y=v.not(":selected")}else{y=y.find("option:selected")}try{z=new RegExp(a.trim(w.elements["filterInput"+A].val()),"gi")}catch(x){z=new RegExp("/a^/","gi")}y.each(function(C,E){var B=a(E),D=true;if(E.text.match(z)||(w.settings.filterOnValues&&B.attr("value").match(z))){D=false;w.elements["select"+A].append(B.clone(true).prop("selected",B.data("_selected")))}v.eq(B.data("original-index")).data("filtered"+A,D)});m(w)}function q(v,x){var w=v.element.find("option");v.elements["select"+x].find("option").each(function(z,A){var y=a(A);w.eq(y.data("original-index")).data("_selected",y.prop("selected"))})}function s(v){var w=v.children("option");w.sort(function(x,z){var y=parseInt(x.getAttribute("data-sortindex")),A=parseInt(z.getAttribute("data-sortindex"));if(y>A){return 1}if(y<A){return -1}return 0});w.detach().appendTo(v)}function r(v){v.find("option").sort(function(w,x){return(a(w).data("original-index")>a(x).data("original-index"))?1:-1}).appendTo(v)}function e(v){v.elements.select1.find("option").each(function(){v.element.find("option").data("_selected",false)})}function j(v){if(v.settings.preserveSelectionOnMove==="all"&&!v.settings.moveOnSelect){q(v,1);q(v,2)}else{if(v.settings.preserveSelectionOnMove==="moved"&&!v.settings.moveOnSelect){q(v,1)}}v.elements.select1.find("option:selected").each(function(x,y){var w=a(y);if(!w.data("filtered1")){d(v,w.data("original-index"),true)}});n(v);t(v);if(v.settings.sortByInputOrder){s(v.elements.select2)}else{r(v.elements.select2)}}function o(v){if(v.settings.preserveSelectionOnMove==="all"&&!v.settings.moveOnSelect){q(v,1);q(v,2)}else{if(v.settings.preserveSelectionOnMove==="moved"&&!v.settings.moveOnSelect){q(v,2)}}v.elements.select2.find("option:selected").each(function(x,y){var w=a(y);if(!w.data("filtered2")){d(v,w.data("original-index"),false)}});n(v);t(v);r(v.elements.select1);if(v.settings.sortByInputOrder){s(v.elements.select2)}}function k(v){if(v.settings.preserveSelectionOnMove==="all"&&!v.settings.moveOnSelect){q(v,1);q(v,2)}else{if(v.settings.preserveSelectionOnMove==="moved"&&!v.settings.moveOnSelect){q(v,1)}}v.element.find("option").each(function(x,y){var w=a(y);if(!w.data("filtered1")){w.prop("selected",true);w.attr("data-sortindex",v.sortIndex);v.sortIndex++}});n(v);t(v)}function p(v){if(v.settings.preserveSelectionOnMove==="all"&&!v.settings.moveOnSelect){q(v,1);q(v,2)}else{if(v.settings.preserveSelectionOnMove==="moved"&&!v.settings.moveOnSelect){q(v,2)}}v.element.find("option").each(function(x,y){var w=a(y);if(!w.data("filtered2")){w.prop("selected",false);w.removeAttr("data-sortindex")}});n(v);t(v)}function b(v){v.elements.form.submit(function(w){if(v.elements.filterInput1.is(":focus")){w.preventDefault();v.elements.filterInput1.focusout()}else{if(v.elements.filterInput2.is(":focus")){w.preventDefault();v.elements.filterInput2.focusout()}}});v.element.on("bootstrapDualListbox.refresh",function(w,x){v.refresh(x)});v.elements.filterClear1.on("click",function(){v.setNonSelectedFilter("",true)});v.elements.filterClear2.on("click",function(){v.setSelectedFilter("",true)});if(v.settings.eventMoveOverride===false){v.elements.moveButton.on("click",function(){j(v)})}if(v.settings.eventMoveAllOverride===false){v.elements.moveAllButton.on("click",function(){k(v)})}if(v.settings.eventRemoveOverride===false){v.elements.removeButton.on("click",function(){o(v)})}if(v.settings.eventRemoveAllOverride===false){v.elements.removeAllButton.on("click",function(){p(v)})}v.elements.filterInput1.on("change keyup",function(){g(v,1)});v.elements.filterInput2.on("change keyup",function(){g(v,2)})}c.prototype={init:function(){this.container=a('<div class="bootstrap-duallistbox-container row"> <div class="box1 col-md-6">   <label></label>   <span class="info-container">     <span class="info"></span>     <button type="button" class="btn btn-sm clear1" style="float:right!important;"></button>   </span>   <input class="form-control filter" type="text">   <div class="btn-group buttons">     <button type="button" class="btn moveall"></button>     <button type="button" class="btn move"></button>   </div>   <select multiple="multiple"></select> </div> <div class="box2 col-md-6">   <label></label>   <span class="info-container">     <span class="info"></span>     <button type="button" class="btn btn-sm clear2" style="float:right!important;"></button>   </span>   <input class="form-control filter" type="text">   <div class="btn-group buttons">     <button type="button" class="btn remove"></button>     <button type="button" class="btn removeall"></button>   </div>   <select multiple="multiple"></select> </div></div>').insertBefore(this.element);this.elements={originalSelect:this.element,box1:a(".box1",this.container),box2:a(".box2",this.container),filterInput1:a(".box1 .filter",this.container),filterInput2:a(".box2 .filter",this.container),filterClear1:a(".box1 .clear1",this.container),filterClear2:a(".box2 .clear2",this.container),label1:a(".box1 > label",this.container),label2:a(".box2 > label",this.container),info1:a(".box1 .info",this.container),info2:a(".box2 .info",this.container),select1:a(".box1 select",this.container),select2:a(".box2 select",this.container),moveButton:a(".box1 .move",this.container),removeButton:a(".box2 .remove",this.container),moveAllButton:a(".box1 .moveall",this.container),removeAllButton:a(".box2 .removeall",this.container),form:a(a(".box1 .filter",this.container)[0].form)};this.originalSelectName=this.element.attr("name")||"";var v="bootstrap-duallistbox-nonselected-list_"+this.originalSelectName,w="bootstrap-duallistbox-selected-list_"+this.originalSelectName;this.elements.select1.attr("id",v);this.elements.select2.attr("id",w);this.elements.label1.attr("for",v);this.elements.label2.attr("for",w);this.selectedElements=0;this.sortIndex=0;this.elementCount=0;this.setFilterTextClear(this.settings.filterTextClear);this.setFilterPlaceHolder(this.settings.filterPlaceHolder);this.setMoveSelectedLabel(this.settings.moveSelectedLabel);this.setMoveAllLabel(this.settings.moveAllLabel);this.setRemoveSelectedLabel(this.settings.removeSelectedLabel);this.setRemoveAllLabel(this.settings.removeAllLabel);this.setMoveOnSelect(this.settings.moveOnSelect);this.setMoveOnDoubleClick(this.settings.moveOnDoubleClick);this.setPreserveSelectionOnMove(this.settings.preserveSelectionOnMove);this.setSelectedListLabel(this.settings.selectedListLabel);this.setNonSelectedListLabel(this.settings.nonSelectedListLabel);this.setHelperSelectNamePostfix(this.settings.helperSelectNamePostfix);this.setSelectOrMinimalHeight(this.settings.selectorMinimalHeight);u(this);this.setShowFilterInputs(this.settings.showFilterInputs);this.setNonSelectedFilter(this.settings.nonSelectedFilter);this.setSelectedFilter(this.settings.selectedFilter);this.setInfoText(this.settings.infoText);this.setInfoTextFiltered(this.settings.infoTextFiltered);this.setInfoTextEmpty(this.settings.infoTextEmpty);this.setFilterOnValues(this.settings.filterOnValues);this.setSortByInputOrder(this.settings.sortByInputOrder);this.setEventMoveOverride(this.settings.eventMoveOverride);this.setEventMoveAllOverride(this.settings.eventMoveAllOverride);this.setEventRemoveOverride(this.settings.eventRemoveOverride);this.setEventRemoveAllOverride(this.settings.eventRemoveAllOverride);this.setBtnClass(this.settings.btnClass);this.setBtnMoveText(this.settings.btnMoveText);this.setBtnRemoveText(this.settings.btnRemoveText);this.setBtnMoveAllText(this.settings.btnMoveAllText);this.setBtnRemoveAllText(this.settings.btnRemoveAllText);this.element.hide();b(this);n(this);return this.element},setFilterTextClear:function(w,v){this.settings.filterTextClear=w;this.elements.filterClear1.html(w);this.elements.filterClear2.html(w);if(v){n(this)}return this.element},setFilterPlaceHolder:function(w,v){this.settings.filterPlaceHolder=w;this.elements.filterInput1.attr("placeholder",w);this.elements.filterInput2.attr("placeholder",w);if(v){n(this)}return this.element},setMoveSelectedLabel:function(w,v){this.settings.moveSelectedLabel=w;this.elements.moveButton.attr("title",w);if(v){n(this)}return this.element},setMoveAllLabel:function(w,v){this.settings.moveAllLabel=w;this.elements.moveAllButton.attr("title",w);if(v){n(this)}return this.element},setRemoveSelectedLabel:function(w,v){this.settings.removeSelectedLabel=w;this.elements.removeButton.attr("title",w);if(v){n(this)}return this.element},setRemoveAllLabel:function(w,v){this.settings.removeAllLabel=w;this.elements.removeAllButton.attr("title",w);if(v){n(this)}return this.element},setMoveOnSelect:function(x,v){if(i){x=true}this.settings.moveOnSelect=x;if(this.settings.moveOnSelect){this.container.addClass("moveonselect");var w=this;this.elements.select1.on("change",function(){j(w)});this.elements.select2.on("change",function(){o(w)});this.elements.moveButton.detach();this.elements.removeButton.detach()}else{this.container.removeClass("moveonselect");this.elements.select1.off("change");this.elements.select2.off("change");this.elements.moveButton.insertAfter(this.elements.moveAllButton);this.elements.removeButton.insertBefore(this.elements.removeAllButton)}if(v){n(this)}return this.element},setMoveOnDoubleClick:function(x,v){if(i){x=false}this.settings.moveOnDoubleClick=x;if(this.settings.moveOnDoubleClick){this.container.addClass("moveondoubleclick");var w=this;this.elements.select1.on("dblclick",function(){j(w)});this.elements.select2.on("dblclick",function(){o(w)})}else{this.container.removeClass("moveondoubleclick");this.elements.select1.off("dblclick");this.elements.select2.off("dblclick")}if(v){n(this)}return this.element},setPreserveSelectionOnMove:function(w,v){if(i){w=false}this.settings.preserveSelectionOnMove=w;if(v){n(this)}return this.element},setSelectedListLabel:function(w,v){this.settings.selectedListLabel=w;if(w){this.elements.label2.show().html(w)}else{this.elements.label2.hide().html(w)}if(v){n(this)}return this.element},setNonSelectedListLabel:function(w,v){this.settings.nonSelectedListLabel=w;if(w){this.elements.label1.show().html(w)}else{this.elements.label1.hide().html(w)}if(v){n(this)}return this.element},setHelperSelectNamePostfix:function(w,v){this.settings.helperSelectNamePostfix=w;if(w){this.elements.select1.attr("name",this.originalSelectName+w+"1");this.elements.select2.attr("name",this.originalSelectName+w+"2")}else{this.elements.select1.removeAttr("name");this.elements.select2.removeAttr("name")}if(v){n(this)}return this.element},setSelectOrMinimalHeight:function(x,w){this.settings.selectorMinimalHeight=x;var v=this.element.height();if(this.element.height()<x){v=x}this.elements.select1.height(v);this.elements.select2.height(v);if(w){n(this)}return this.element},setShowFilterInputs:function(w,v){if(!w){this.setNonSelectedFilter("");this.setSelectedFilter("");n(this);this.elements.filterInput1.hide();this.elements.filterInput2.hide()}else{this.elements.filterInput1.show();this.elements.filterInput2.show()}this.settings.showFilterInputs=w;if(v){n(this)}return this.element},setNonSelectedFilter:function(w,v){if(this.settings.showFilterInputs){this.settings.nonSelectedFilter=w;this.elements.filterInput1.val(w);if(v){n(this)}return this.element}},setSelectedFilter:function(w,v){if(this.settings.showFilterInputs){this.settings.selectedFilter=w;this.elements.filterInput2.val(w);if(v){n(this)}return this.element}},setInfoText:function(w,v){this.settings.infoText=w;if(w){this.elements.info1.show();this.elements.info2.show()}else{this.elements.info1.hide();this.elements.info2.hide()}if(v){n(this)}return this.element},setInfoTextFiltered:function(w,v){this.settings.infoTextFiltered=w;if(v){n(this)}return this.element},setInfoTextEmpty:function(w,v){this.settings.infoTextEmpty=w;if(v){n(this)}return this.element},setFilterOnValues:function(w,v){this.settings.filterOnValues=w;if(v){n(this)}return this.element},setSortByInputOrder:function(w,v){this.settings.sortByInputOrder=w;if(v){n(this)}return this.element},setEventMoveOverride:function(w,v){this.settings.eventMoveOverride=w;if(v){n(this)}return this.element},setEventMoveAllOverride:function(w,v){this.settings.eventMoveAllOverride=w;if(v){n(this)}return this.element},setEventRemoveOverride:function(w,v){this.settings.eventRemoveOverride=w;if(v){n(this)}return this.element},setEventRemoveAllOverride:function(w,v){this.settings.eventRemoveAllOverride=w;if(v){n(this)}return this.element},setBtnClass:function(w,v){this.settings.btnClass=w;this.elements.moveButton.attr("class","btn move").addClass(w);this.elements.removeButton.attr("class","btn remove").addClass(w);this.elements.moveAllButton.attr("class","btn moveall").addClass(w);this.elements.removeAllButton.attr("class","btn removeall").addClass(w);if(v){n(this)}return this.element},setBtnMoveText:function(w,v){this.settings.btnMoveText=w;this.elements.moveButton.html(w);if(v){n(this)}return this.element},setBtnRemoveText:function(w,v){this.settings.btnMoveText=w;this.elements.removeButton.html(w);if(v){n(this)}return this.element},setBtnMoveAllText:function(w,v){this.settings.btnMoveText=w;this.elements.moveAllButton.html(w);if(v){n(this)}return this.element},setBtnRemoveAllText:function(w,v){this.settings.btnMoveText=w;this.elements.removeAllButton.html(w);if(v){n(this)}return this.element},getContainer:function(){return this.container},refresh:function(v){u(this);if(!v){q(this,1);q(this,2)}else{e(this)}n(this)},destroy:function(){this.container.remove();this.element.show();a.data(this,"plugin_"+l,null);return this.element}};a.fn[l]=function(w){var v=arguments;if(w===undefined||typeof w==="object"){return this.each(function(){if(!a(this).is("select")){a(this).find("select").each(function(y,z){a(z).bootstrapDualListbox(w)})}else{if(!a.data(this,"plugin_"+l)){a.data(this,"plugin_"+l,new c(this,w))}}})}else{if(typeof w==="string"&&w[0]!=="_"&&w!=="init"){var x;this.each(function(){var y=a.data(this,"plugin_"+l);if(y instanceof c&&typeof y[w]==="function"){x=y[w].apply(y,Array.prototype.slice.call(v,1))}});return x!==undefined?x:this}}}}));