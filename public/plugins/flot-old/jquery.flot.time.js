(function(a){var h={xaxis:{timezone:null,timeformat:null,twelveHourClock:false,monthNames:null}};function d(m,l){return l*Math.floor(m/l)}function e(m,p,w,n){if(typeof m.strftime=="function"){return m.strftime(p)}var v=function(r,y){r=""+r;y=""+(y==null?"0":y);return r.length==1?y+r:r};var x=[];var o=false;var q=m.getHours();var u=q<12;if(w==null){w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}if(n==null){n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}var s;if(q>12){s=q-12}else{if(q==0){s=12}else{s=q}}for(var t=0;t<p.length;++t){var l=p.charAt(t);if(o){switch(l){case"a":l=""+n[m.getDay()];break;case"b":l=""+w[m.getMonth()];break;case"d":l=v(m.getDate());break;case"e":l=v(m.getDate()," ");break;case"h":case"H":l=v(q);break;case"I":l=v(s);break;case"l":l=v(s," ");break;case"m":l=v(m.getMonth()+1);break;case"M":l=v(m.getMinutes());break;case"q":l=""+(Math.floor(m.getMonth()/3)+1);break;case"S":l=v(m.getSeconds());break;case"y":l=v(m.getFullYear()%100);break;case"Y":l=""+m.getFullYear();break;case"p":l=(u)?("am"):("pm");break;case"P":l=(u)?("AM"):("PM");break;case"w":l=""+m.getDay();break}x.push(l);o=false}else{if(l=="%"){o=true}else{x.push(l)}}}return x.join("")}function g(m){function l(r,p,t,s){r[p]=function(){return t[s].apply(t,arguments)}}var q={date:m};if(m.strftime!=undefined){l(q,"strftime",m,"strftime")}l(q,"getTime",m,"getTime");l(q,"setTime",m,"setTime");var o=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"];for(var n=0;n<o.length;n++){l(q,"get"+o[n],m,"getUTC"+o[n]);l(q,"set"+o[n],m,"setUTC"+o[n])}return q}function c(n,m){if(m.timezone=="browser"){return new Date(n)}else{if(!m.timezone||m.timezone=="utc"){return g(new Date(n))}else{if(typeof timezoneJS!="undefined"&&typeof timezoneJS.Date!="undefined"){var l=new timezoneJS.Date();l.setTimezone(m.timezone);l.setTime(n);return l}else{return g(new Date(n))}}}}var k={second:1000,minute:60*1000,hour:60*60*1000,day:24*60*60*1000,month:30*24*60*60*1000,quarter:3*30*24*60*60*1000,year:365.2425*24*60*60*1000};var b=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"]];var i=b.concat([[3,"month"],[6,"month"],[1,"year"]]);var j=b.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function f(l){l.hooks.processOptions.push(function(n,m){a.each(n.getAxes(),function(p,o){var q=o.options;if(q.mode=="time"){o.tickGenerator=function(r){var F=[];var t=c(r.min,q);var y=0;var C=(q.tickSize&&q.tickSize[1]==="quarter")||(q.minTickSize&&q.minTickSize[1]==="quarter")?j:i;if(q.minTickSize!=null){if(typeof q.tickSize=="number"){y=q.tickSize}else{y=q.minTickSize[0]*k[q.minTickSize[1]]}}for(var w=0;w<C.length-1;++w){if(r.delta<(C[w][0]*k[C[w][1]]+C[w+1][0]*k[C[w+1][1]])/2&&C[w][0]*k[C[w][1]]>=y){break}}var B=C[w][0];var H=C[w][1];if(H=="year"){if(q.minTickSize!=null&&q.minTickSize[1]=="year"){B=Math.floor(q.minTickSize[0])}else{var x=Math.pow(10,Math.floor(Math.log(r.delta/k.year)/Math.LN10));var z=(r.delta/k.year)/x;if(z<1.5){B=1}else{if(z<3){B=2}else{if(z<7.5){B=5}else{B=10}}}B*=x}if(B<1){B=1}}r.tickSize=q.tickSize||[B,H];var G=r.tickSize[0];H=r.tickSize[1];var E=G*k[H];if(H=="second"){t.setSeconds(d(t.getSeconds(),G))}else{if(H=="minute"){t.setMinutes(d(t.getMinutes(),G))}else{if(H=="hour"){t.setHours(d(t.getHours(),G))}else{if(H=="month"){t.setMonth(d(t.getMonth(),G))}else{if(H=="quarter"){t.setMonth(3*d(t.getMonth()/3,G))}else{if(H=="year"){t.setFullYear(d(t.getFullYear(),G))}}}}}}t.setMilliseconds(0);if(E>=k.minute){t.setSeconds(0)}if(E>=k.hour){t.setMinutes(0)}if(E>=k.day){t.setHours(0)}if(E>=k.day*4){t.setDate(1)}if(E>=k.month*2){t.setMonth(d(t.getMonth(),3))}if(E>=k.quarter*2){t.setMonth(d(t.getMonth(),6))}if(E>=k.year){t.setMonth(0)}var s=0;var I=Number.NaN;var A;do{A=I;I=t.getTime();F.push(I);if(H=="month"||H=="quarter"){if(G<1){t.setDate(1);var D=t.getTime();t.setMonth(t.getMonth()+(H=="quarter"?3:1));var u=t.getTime();t.setTime(I+s*k.hour+(u-D)*G);s=t.getHours();t.setHours(0)}else{t.setMonth(t.getMonth()+G*(H=="quarter"?3:1))}}else{if(H=="year"){t.setFullYear(t.getFullYear()+G)}else{t.setTime(I+E)}}}while(I<r.max&&I!=A);return F};o.tickFormatter=function(C,r){var s=c(C,r.options);if(q.timeformat!=null){return e(s,q.timeformat,q.monthNames,q.dayNames)}var B=(r.options.tickSize&&r.options.tickSize[1]=="quarter")||(r.options.minTickSize&&r.options.minTickSize[1]=="quarter");var A=r.tickSize[0]*k[r.tickSize[1]];var y=r.max-r.min;var z=(q.twelveHourClock)?" %p":"";var w=(q.twelveHourClock)?"%I":"%H";var u;if(A<k.minute){u=w+":%M:%S"+z}else{if(A<k.day){if(y<2*k.day){u=w+":%M"+z}else{u="%b %d "+w+":%M"+z}}else{if(A<k.month){u="%b %d"}else{if((B&&A<k.quarter)||(!B&&A<k.year)){if(y<k.year){u="%b"}else{u="%b %Y"}}else{if(B&&A<k.year){if(y<k.year){u="Q%q"}else{u="Q%q %Y"}}else{u="%Y"}}}}}var x=e(s,u,q.monthNames,q.dayNames);return x}}})})}a.plot.plugins.push({init:f,options:h,name:"time",version:"1.0"});a.plot.formatDate=e})(jQuery);