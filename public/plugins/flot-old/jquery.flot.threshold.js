(function(a){var c={series:{threshold:null}};function b(d){function f(v,A,k,h,j){var z=k.pointsize,l,D,E,u,w,B=a.extend({},A);B.datapoints={points:[],pointsize:z,format:k.format};B.label=null;B.color=j;B.threshold=null;B.originSeries=A;B.data=[];var t=k.points,g=A.lines.show;var C=[];var q=[];var o;for(l=0;l<t.length;l+=z){D=t[l];E=t[l+1];w=u;if(E<h){u=C}else{u=q}if(g&&w!=u&&D!=null&&l>0&&t[l-z]!=null){var n=D+(h-E)*(D-t[l-z])/(E-t[l-z+1]);w.push(n);w.push(h);for(o=2;o<z;++o){w.push(t[l+o])}u.push(null);u.push(null);for(o=2;o<z;++o){u.push(t[l+o])}u.push(n);u.push(h);for(o=2;o<z;++o){u.push(t[l+o])}}u.push(D);u.push(E);for(o=2;o<z;++o){u.push(t[l+o])}}k.points=q;B.datapoints.points=C;if(B.datapoints.points.length>0){var r=a.inArray(A,v.getData());v.getData().splice(r+1,0,B)}}function e(h,i,g){if(!i.threshold){return}if(i.threshold instanceof Array){i.threshold.sort(function(j,k){return j.below-k.below});a(i.threshold).each(function(j,k){f(h,i,g,k.below,k.color)})}else{f(h,i,g,i.threshold.below,i.threshold.color)}}d.hooks.processDatapoints.push(e)}a.plot.plugins.push({init:b,options:c,name:"threshold",version:"1.2"})})(jQuery);