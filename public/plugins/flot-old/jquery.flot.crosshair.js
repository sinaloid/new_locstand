(function(a){var c={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function b(h){var d={x:-1,y:-1,locked:false};h.setCrosshair=function i(l){if(!l){d.x=-1}else{var k=h.p2c(l);d.x=Math.max(0,Math.min(k.left,h.width()));d.y=Math.max(0,Math.min(k.top,h.height()))}h.triggerRedrawOverlay()};h.clearCrosshair=h.setCrosshair;h.lockCrosshair=function e(k){if(k){h.setCrosshair(k)}d.locked=true};h.unlockCrosshair=function j(){d.locked=false};function g(k){if(d.locked){return}if(d.x!=-1){d.x=-1;h.triggerRedrawOverlay()}}function f(k){if(d.locked){return}if(h.getSelection&&h.getSelection()){d.x=-1;return}var l=h.offset();d.x=Math.max(0,Math.min(k.pageX-l.left,h.width()));d.y=Math.max(0,Math.min(k.pageY-l.top,h.height()));h.triggerRedrawOverlay()}h.hooks.bindEvents.push(function(l,k){if(!l.getOptions().crosshair.mode){return}k.mouseout(g);k.mousemove(f)});h.hooks.drawOverlay.push(function(p,m){var l=p.getOptions().crosshair;if(!l.mode){return}var q=p.getPlotOffset();m.save();m.translate(q.left,q.top);if(d.x!=-1){var k=p.getOptions().crosshair.lineWidth%2===0?0:0.5;m.strokeStyle=l.color;m.lineWidth=l.lineWidth;m.lineJoin="round";m.beginPath();if(l.mode.indexOf("x")!=-1){var n=Math.round(d.x)+k;m.moveTo(n,0);m.lineTo(n,p.height())}if(l.mode.indexOf("y")!=-1){var o=Math.round(d.y)+k;m.moveTo(0,o);m.lineTo(p.width(),o)}m.stroke()}m.restore()});h.hooks.shutdown.push(function(l,k){k.unbind("mouseout",g);k.unbind("mousemove",f)})}a.plot.plugins.push({init:b,options:c,name:"crosshair",version:"1.0"})})(jQuery);